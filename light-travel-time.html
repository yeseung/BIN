<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Light Travel Time Calculator</title>

    <style>
        :root{
            --bg: #f6f7fb;
            --card: #ffffff;
            --text: #101828;
            --muted: #667085;
            --border: #e5e7eb;
            --shadow: 0 10px 30px rgba(16,24,40,.06);
            --radius: 18px;

            --accent: #2563eb;
            --accent2: #22c55e;

            --bar-bg: #eef2ff;
            --bar-fill: linear-gradient(90deg, #2563eb, #22c55e);
        }

        *{ box-sizing: border-box; }
        html, body{ height: 100%; }
        body{
            margin:0;
            background: var(--bg);
            color: var(--text);
            font-family: system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;
            line-height: 1.45;
        }

        .wrap{
            width: min(1100px, 100%);
            margin: 0 auto;
            padding: 22px 16px 40px;
        }

        .hero{
            background: var(--card);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 18px 18px;
            display:flex;
            align-items:center;
            justify-content: space-between;
            gap: 12px;
        }
        .hero .tag{
            display:inline-flex;
            align-items:center;
            gap:8px;
            font-size: 12px;
            color: #1d4ed8;
            background: #eff6ff;
            border: 1px solid #dbeafe;
            padding: 6px 10px;
            border-radius: 999px;
            font-weight: 700;
            width: fit-content;
        }
        .hero h1{
            margin: 10px 0 6px;
            font-size: 22px;
            letter-spacing: -0.2px;
        }
        .hero p{
            margin:0;
            color: var(--muted);
            font-size: 13px;
        }
        .hero .icon{
            width: 46px; height: 46px;
            border-radius: 16px;
            background: #f1f5f9;
            border: 1px solid var(--border);
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 22px;
            flex: 0 0 auto;
        }

        .panel{
            margin-top: 14px;
            background: var(--card);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 16px;
        }
        .panel h2{
            margin:0 0 12px;
            font-size: 14px;
            color: #0f172a;
            display:flex;
            align-items:center;
            gap: 8px;
        }
        .panel h2 .dot{
            width: 8px; height: 8px;
            background: var(--accent);
            border-radius: 999px;
            display:inline-block;
        }

        .seg{
            display:flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .seg button{
            appearance: none;
            border: 1px solid var(--border);
            background: #fff;
            color: var(--text);
            border-radius: 14px;
            padding: 12px 14px;
            font-weight: 800;
            cursor: pointer;
            flex: 1 1 260px;
            display:flex;
            align-items:center;
            justify-content:center;
            gap: 10px;
            transition: transform .05s ease, border-color .15s ease, box-shadow .15s ease;
            box-shadow: 0 6px 16px rgba(16,24,40,.05);
        }
        .seg button:active{ transform: translateY(1px); }
        .seg button .emoji{ font-size: 18px; }
        .seg button.is-active{
            border-color: #bfdbfe;
            box-shadow: 0 10px 24px rgba(37,99,235,.15);
            background: #eff6ff;
            color: #1d4ed8;
        }
        .hint{
            margin-top: 10px;
            color: var(--muted);
            font-size: 12px;
        }

        .list{
            margin-top: 14px;
            display:flex;
            flex-direction: column;
            gap: 12px;
        }
        .row{
            border: 1px solid var(--border);
            background: #fff;
            border-radius: 16px;
            padding: 14px 14px 12px;
        }
        .topline{
            display:flex;
            align-items:flex-start;
            justify-content: space-between;
            gap: 12px;
        }
        .left{
            display:flex;
            gap: 10px;
            align-items:flex-start;
            min-width: 0;
        }
        .badge{
            width: 40px; height: 40px;
            border-radius: 14px;
            background: #f1f5f9;
            border: 1px solid var(--border);
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 18px;
            flex: 0 0 auto;
        }
        .meta{
            min-width: 0;
        }
        .meta .name{
            font-weight: 900;
            letter-spacing: -0.15px;
            margin: 0;
            font-size: 14px;
        }
        .meta .desc{
            margin: 2px 0 0;
            color: var(--muted);
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 520px;
        }
        .right{
            text-align: right;
            flex: 0 0 auto;
        }
        .time{
            font-weight: 950;
            font-size: 18px;
            letter-spacing: -0.3px;
            margin: 0;
            color: #0f172a;
        }
        .dist{
            margin: 2px 0 0;
            color: var(--muted);
            font-size: 12px;
        }

        .bar{
            margin-top: 10px;
            width: 100%;
            height: 10px;
            background: var(--bar-bg);
            border-radius: 999px;
            overflow:hidden;
            border: 1px solid #e0e7ff;
        }
        .bar > i{
            display:block;
            height: 100%;
            width: 0%;
            background: var(--bar-fill);
            border-radius: 999px;
            transition: width .45s ease;
        }

        .footer-note{
            margin-top: 14px;
            color: var(--muted);
            font-size: 12px;
            padding: 0 2px;
        }

        .grid2{
            display:grid;
            grid-template-columns: 1fr;
            gap: 14px;
        }
        @media (min-width: 860px){
            .grid2{
                grid-template-columns: 420px 1fr;
                align-items: start;
            }
            .meta .desc{ max-width: 380px; }
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="hero">
        <div>
            <div class="tag">â˜€ï¸ íƒœì–‘ê³„ í—ˆë¸Œ</div>
            <h1>ë¹› ë„ë‹¬ ì‹œê°„ ê³„ì‚°ê¸°</h1>
            <p>ë¹›(ê´‘ì†)ì´ ì„ íƒí•œ ì¶œë°œì ì—ì„œ ê° ì²œì²´ê¹Œì§€ ë„ë‹¬í•˜ëŠ” ì‹œê°„ì„ ê³„ì‚°í•©ë‹ˆë‹¤.</p>
        </div>
        <div class="icon" aria-hidden="true">âœ¨</div>
    </div>

    <div class="grid2">
        <section class="panel">
            <h2><span class="dot"></span>ë¹›ì˜ ì¶œë°œì  ì„ íƒ</h2>

            <div class="seg" role="tablist" aria-label="ì¶œë°œì  ì„ íƒ">
                <button id="btnSun" class="is-active" type="button" role="tab" aria-selected="true">
                    <span class="emoji">â˜€ï¸</span> íƒœì–‘ì—ì„œ ì¶œë°œ
                </button>
                <button id="btnEarth" type="button" role="tab" aria-selected="false">
                    <span class="emoji">ğŸŒ</span> ì§€êµ¬ì—ì„œ ì¶œë°œ
                </button>
            </div>

            <div class="hint">
                â€» ì§€êµ¬ì—ì„œ ì¶œë°œ ì‹œ, í–‰ì„± ê°„ ê±°ë¦¬ëŠ” â€œí‰ê·  ê¶¤ë„ ë°˜ì§€ë¦„ ì°¨ì´(AU) ê¸°ë°˜ ê·¼ì‚¬â€ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.<br />
                (ì •ë°€ ì²œë¬¸ ê³„ì‚°ì´ ì•„ë‹ˆë¼ êµìœ¡/ì‹œê°í™”ìš©ì…ë‹ˆë‹¤.)
            </div>
        </section>

        <section class="panel">
            <h2><span class="dot"></span>ê²°ê³¼</h2>
            <div id="list" class="list"></div>

            <div class="footer-note">
                ê¸°ì¤€ ê´‘ì†: 299,792.458 km/s Â· ê±°ë¦¬ ë‹¨ìœ„: km (í‘œì‹œëŠ” â€œë§Œ/ì–µ/ì¡°â€¦â€ë¡œ ìë™ ë³€í™˜)
            </div>
        </section>
    </div>
</div>

<script>
    // ===== Constants =====
    const C_KM_S = 299792.458;         // speed of light in km/s
    const AU_KM  = 149597870.7;        // astronomical unit in km

    // ===== Data (simple + readable) =====
    // distanceAuFromSun: í‰ê·  ê³µì „ë°˜ê²½(ë°˜ì¥ì¶•) ê¸°ì¤€
    // Earth-originì€ "ì§€êµ¬ AU(1)ì™€ì˜ ì°¨ì´"ë¡œ ê·¼ì‚¬
    const bodies = [
        { key:"mercury", name:"ìˆ˜ì„±", icon:"â˜¿ï¸", desc:"íƒœì–‘ì— ê°€ì¥ ê°€ê¹Œìš´ í–‰ì„±", distanceAuFromSun: 0.387 },
        { key:"venus",   name:"ê¸ˆì„±", icon:"â™€ï¸", desc:"ì§€êµ¬ì™€ ë¹„ìŠ·í•œ í¬ê¸°",      distanceAuFromSun: 0.723 },
        // ë‹¬: íƒœì–‘ê¸°ì¤€ì€ ëŒ€ëµ ì§€êµ¬ì™€ ë¹„ìŠ·(1 AU), ì§€êµ¬ê¸°ì¤€ì€ í‰ê·  ë‹¬ê±°ë¦¬ ì‚¬ìš©
        { key:"moon",    name:"ë‹¬",   icon:"ğŸŒ™", desc:"ì§€êµ¬ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ì²œì²´", distanceKmFromEarth: 384400, distanceAuFromSun: 1.000 },
        { key:"earth",   name:"ì§€êµ¬", icon:"ğŸŒ", desc:"ìš°ë¦¬ì˜ ê³ í–¥",             distanceAuFromSun: 1.000 },
        { key:"mars",    name:"í™”ì„±", icon:"ğŸ”´", desc:"ë¶‰ì€ í–‰ì„±",               distanceAuFromSun: 1.524 },
        { key:"jupiter", name:"ëª©ì„±", icon:"ğŸŸ ", desc:"íƒœì–‘ê³„ ìµœëŒ€ í–‰ì„±",         distanceAuFromSun: 5.204 },
        { key:"saturn",  name:"í† ì„±", icon:"ğŸª", desc:"ì•„ë¦„ë‹¤ìš´ ê³ ë¦¬ë¥¼ ê°€ì§„ í–‰ì„±", distanceAuFromSun: 9.582 },
        { key:"uranus",  name:"ì²œì™•ì„±", icon:"ğŸ”µ", desc:"ì˜†ìœ¼ë¡œ ëˆ„ì›Œ ë„ëŠ” í–‰ì„±",   distanceAuFromSun: 19.191 },
        { key:"neptune", name:"í•´ì™•ì„±", icon:"ğŸ’™", desc:"íƒœì–‘ê³„ ìµœì™¸ê³½ í–‰ì„±(ê³ ì „)", distanceAuFromSun: 30.07 },
        { key:"pluto",   name:"ëª…ì™•ì„±", icon:"â„ï¸", desc:"ì™œì†Œí–‰ì„±",               distanceAuFromSun: 39.48 },
        // í•­ì„±/ì€í•˜(ëŒ€í‘œ ê°’)
        //{ key:"alpha",   name:"ì•ŒíŒŒ ì„¼íƒ€ìš°ë¦¬", icon:"â­", desc:"ê°€ì¥ ê°€ê¹Œìš´ ë³„(ê³„)", lightYears: 4.246 },
        //{ key:"andromeda", name:"ì•ˆë“œë¡œë©”ë‹¤ ì€í•˜", icon:"ğŸŒŒ", desc:"ê°€ì¥ ê°€ê¹Œìš´ ëŒ€í˜• ì€í•˜", lightYears: 2.537e6 }
    ];

    // ===== Formatting helpers =====
    function formatKoreanNumber(n){
        // n: km (could be huge)
        // ê°„ë‹¨ í‘œê¸°: ë§Œ/ì–µ/ì¡°/ê²½/í•´
        const units = [
            { v: 1e20, s: "í•´" },
            { v: 1e16, s: "ê²½" },
            { v: 1e12, s: "ì¡°" },
            { v: 1e8,  s: "ì–µ" },
            { v: 1e4,  s: "ë§Œ" }
        ];
        for (const u of units){
            if (n >= u.v){
                const val = n / u.v;
                return `${trimFixed(val, 2)}${u.s}km`;
            }
        }
        return `${Math.round(n).toLocaleString("ko-KR")}km`;
    }

    function trimFixed(x, digits){
        // 2.00 -> 2, 2.10 -> 2.1
        const s = x.toFixed(digits);
        return s.replace(/\.?0+$/,"");
    }

    function formatLightTime(seconds){
        const minute = 60;
        const hour = 3600;
        const day = 86400;
        const year = 31557600; // í‰ê·  íƒœì–‘ë…„(365.25ì¼) ê·¼ì‚¬

        if (seconds < hour){
            return { text: `${trimFixed(seconds/minute, 2)}ë¶„`, unit: "min" };
        }
        if (seconds < day){
            return { text: `${trimFixed(seconds/hour, 2)}ì‹œê°„`, unit: "hr" };
        }
        if (seconds < year){
            return { text: `${trimFixed(seconds/day, 2)}ì¼`, unit: "day" };
        }
        return { text: `${trimFixed(seconds/year, 2)}ë…„`, unit: "yr" };
    }

    function lyToKm(ly){
        // 1 ly â‰ˆ 9.4607e12 km
        return ly * 9.4607e12;
    }

    // ===== Distance model =====
    function getDistanceKm(origin){
        // origin: "sun" or "earth"
        // returns: array with computed km
        const earthAU = 1.0;

        return bodies.map(b => {
            // far objects by light-year
            if (typeof b.lightYears === "number"){
                const km = lyToKm(b.lightYears);
                return { ...b, distanceKm: km };
            }

            if (origin === "sun"){
                // if explicit km exists (moon from earth) but sun-origin uses AU as rough
                if (typeof b.distanceAuFromSun === "number"){
                    return { ...b, distanceKm: b.distanceAuFromSun * AU_KM };
                }
                return { ...b, distanceKm: NaN };
            }

            // origin === "earth"
            if (b.key === "earth"){
                return { ...b, distanceKm: 0 };
            }
            if (b.key === "moon"){
                return { ...b, distanceKm: b.distanceKmFromEarth };
            }
            // planets: AU difference approximation
            if (typeof b.distanceAuFromSun === "number"){
                const km = Math.abs(b.distanceAuFromSun - earthAU) * AU_KM;
                return { ...b, distanceKm: km };
            }
            return { ...b, distanceKm: NaN };
        });
    }

    // ===== UI render =====
    const $list = document.getElementById("list");
    const $btnSun = document.getElementById("btnSun");
    const $btnEarth = document.getElementById("btnEarth");

    let origin = "sun";

    function render(){
        const items = getDistanceKm(origin)
        .map(b => {
            const seconds = b.distanceKm / C_KM_S;
            const t = formatLightTime(seconds);

            return {
                ...b,
                seconds,
                timeText: t.text,
                distText: formatKoreanNumber(b.distanceKm)
            };
        });

        // max distance for progress bar scaling (ignore NaN)
        const maxKm = Math.max(...items.map(x => isFinite(x.distanceKm) ? x.distanceKm : 0), 1);

        $list.innerHTML = items.map(x => {
            const pct = isFinite(x.distanceKm) ? (x.distanceKm / maxKm) * 100 : 0;

            // ì§€êµ¬ ê¸°ì¤€ì¼ ë•Œ "ì§€êµ¬ 0"ì€ ë„ˆë¬´ ë°‹ë°‹í•˜ë‹ˆ ìµœì†Œ bar 2% ì •ë„(ì›í•˜ë©´ ì œê±° ê°€ëŠ¥)
            const barPct = (origin === "earth" && x.key === "earth") ? 2 : pct;

            return `
          <article class="row">
            <div class="topline">
              <div class="left">
                <div class="badge" aria-hidden="true">${x.icon || "âœ¨"}</div>
                <div class="meta">
                  <p class="name">${escapeHtml(x.name)}</p>
                  <p class="desc">${escapeHtml(x.desc || "")}</p>
                </div>
              </div>
              <div class="right">
                <p class="time">${escapeHtml(x.timeText)}</p>
                <p class="dist">${escapeHtml(x.distText)}</p>
              </div>
            </div>
            <div class="bar" aria-hidden="true">
              <i style="width:${Math.max(0, Math.min(100, barPct))}%;"></i>
            </div>
          </article>
        `;
        }).join("");
    }

    function setOrigin(next){
        origin = next;

        const isSun = origin === "sun";
        $btnSun.classList.toggle("is-active", isSun);
        $btnEarth.classList.toggle("is-active", !isSun);

        $btnSun.setAttribute("aria-selected", String(isSun));
        $btnEarth.setAttribute("aria-selected", String(!isSun));

        render();
    }

    function escapeHtml(str){
        return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // ===== Events =====
    $btnSun.addEventListener("click", () => setOrigin("sun"));
    $btnEarth.addEventListener("click", () => setOrigin("earth"));

    // init
    render();
</script>
</body>
</html>
