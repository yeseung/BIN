<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ë‹¨ì–´ ì¹´ë“œ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸ - Word Memory Test (Level Mode)</title>

    <!-- https://www.jiraksil.com/service/word_memory -->

    <style>
        :root{
            --bg:#f6f7fb;
            --card:#ffffff;
            --text:#111827;
            --muted:#6b7280;
            --line:#e5e7eb;
            --shadow:0 10px 25px rgba(0,0,0,.08);
            --radius:18px;

            --primary:#111827;
            --good:#22c55e;
            --bad:#ef4444;
            --warn:#f59e0b;
            --info:#2563eb;
            --chip:#f3f4f6;
        }
        *{box-sizing:border-box;margin:0;padding:0;}
        body{
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;
            background:var(--bg);
            color:var(--text);
            min-height:100vh;
            display:flex;
            justify-content:center;
            padding:18px;
            user-select:none;
            -webkit-user-select:none;
        }
        .wrap{width:100%;max-width:900px;}
        .top{
            display:flex;
            align-items:flex-end;
            justify-content:space-between;
            gap:12px;
            flex-wrap:wrap;
            margin-bottom:12px;
        }
        .title{
            font-size:22px;
            font-weight:900;
            letter-spacing:-0.2px;
        }
        .subtitle{
            margin-top:6px;
            color:var(--muted);
            font-size:13px;
            line-height:1.55;
        }
        .panel{
            background:var(--card);
            border:1px solid var(--line);
            border-radius:var(--radius);
            box-shadow:var(--shadow);
            padding:14px;
        }
        .hud{
            display:flex;
            gap:10px;
            flex-wrap:wrap;
            align-items:stretch;
        }
        .hudItem{
            flex:1 1 160px;
            border:1px solid var(--line);
            border-radius:14px;
            padding:10px 12px;
            background:#fafafa;
            min-width:160px;
        }
        .hudLabel{font-size:12px;color:var(--muted);margin-bottom:6px;}
        .hudVal{font-size:18px;font-weight:900;letter-spacing:-0.2px;}
        .hearts{display:flex;gap:4px;align-items:center;}
        .heart{font-size:16px;line-height:1;}
        .heart.lost{opacity:.2;filter:grayscale(1);}

        .game{
            margin-top:12px;
            position:relative;
            min-height:560px;
            border-radius:var(--radius);
            border:1px solid var(--line);
            background:linear-gradient(180deg,#ffffff, #fafbff);
            box-shadow:var(--shadow);
            overflow:hidden;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:16px;
        }

        /* particles */
        .particle{
            position:absolute;
            width:6px;height:6px;border-radius:50%;
            background:rgba(17,24,39,.08);
            animation:float 8s linear infinite;
            pointer-events:none;
        }
        @keyframes float{
            0%{ transform:translateY(0) rotate(0deg); opacity:0; }
            10%{opacity:1;}
            90%{opacity:1;}
            100%{ transform:translateY(-520px) rotate(720deg); opacity:0; }
        }

        /* layers */
        .layer{
            display:none;
            position:absolute;
            inset:auto;
            z-index:10;
            width:min(520px, 92%);
            background:rgba(255,255,255,.92);
            border:1px solid var(--line);
            border-radius:18px;
            box-shadow:var(--shadow);
            padding:18px;
            text-align:center;
            backdrop-filter: blur(8px);
        }
        .layer.show{display:block;animation:pop .35s ease-out;}
        @keyframes pop{0%{transform:scale(.92);opacity:0;}100%{transform:scale(1);opacity:1;}}
        .layerTitle{font-size:22px;font-weight:900;letter-spacing:-0.2px;}
        .layerText{margin-top:10px;color:var(--muted);font-size:14px;line-height:1.6;}

        .btn{
            margin-top:14px;
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:8px;
            padding:12px 16px;
            border-radius:12px;
            border:1px solid var(--line);
            background:var(--primary);
            color:#fff;
            font-weight:900;
            cursor:pointer;
            width:min(320px, 100%);
        }
        .btn.secondary{
            background:#fff;
            color:var(--primary);
        }
        .btnRow{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}

        /* countdown */
        .countdown{
            display:none;
            position:absolute;
            z-index:20;
            font-size:84px;
            font-weight:900;
            color:#111827;
            letter-spacing:-1px;
            text-shadow:0 10px 30px rgba(0,0,0,.12);
            animation:countPop .8s ease-out;
            pointer-events:none;
        }
        @keyframes countPop{
            0%{transform:scale(1.8);opacity:0;}
            50%{transform:scale(1);opacity:1;}
            100%{transform:scale(.85);opacity:0;}
        }

        /* word show */
        .wordBox{
            display:none;
            position:absolute;
            z-index:15;
            padding:18px 26px;
            border-radius:16px;
            border:1px solid var(--line);
            background:#fff;
            box-shadow:var(--shadow);
            font-size:36px;
            font-weight:900;
            letter-spacing:-0.4px;
        }
        .wordBox.show{display:block;}
        .anim-flip{ animation: flipIn .35s ease-out; }
        .anim-slide{ animation: slideIn .35s ease-out; }
        .anim-fade{ animation: fadeIn .35s ease-out; }
        .anim-zoom{ animation: zoomIn .35s ease-out; }
        .anim-bounce{ animation: bounceIn .45s ease-out; }
        .anim-rotate{ animation: rotateIn .45s ease-out; }
        .anim-left{ animation: slideFromLeft .35s ease-out; }
        .anim-right{ animation: slideFromRight .35s ease-out; }
        .anim-elastic{ animation: elasticIn .55s ease-out; }

        @keyframes flipIn{0%{transform:perspective(400px) rotateY(-90deg);opacity:0;}100%{transform:perspective(400px) rotateY(0);opacity:1;}}
        @keyframes slideIn{0%{transform:translateY(-70px);opacity:0;}100%{transform:translateY(0);opacity:1;}}
        @keyframes fadeIn{0%{opacity:0;}100%{opacity:1;}}
        @keyframes zoomIn{0%{transform:scale(.2);opacity:0;}100%{transform:scale(1);opacity:1;}}
        @keyframes bounceIn{0%{transform:scale(0);}50%{transform:scale(1.18);}70%{transform:scale(.92);}100%{transform:scale(1);}}
        @keyframes rotateIn{0%{transform:rotate(-180deg) scale(.2);opacity:0;}100%{transform:rotate(0) scale(1);opacity:1;}}
        @keyframes slideFromLeft{0%{transform:translateX(-160px);opacity:0;}100%{transform:translateX(0);opacity:1;}}
        @keyframes slideFromRight{0%{transform:translateX(160px);opacity:0;}100%{transform:translateX(0);opacity:1;}}
        @keyframes elasticIn{0%{transform:scale(0);}55%{transform:scale(1.08);}70%{transform:scale(.96);}85%{transform:scale(1.02);}100%{transform:scale(1);}}

        /* progress */
        .progress{
            position:absolute;
            top:14px;
            right:14px;
            z-index:8;
            display:none;
            text-align:right;
            color:rgba(17,24,39,.65);
            font-size:13px;
        }
        .dots{display:flex;gap:6px;justify-content:flex-end;margin-top:6px;}
        .dot{
            width:10px;height:10px;border-radius:999px;
            background:rgba(17,24,39,.12);
            transition:.2s;
        }
        .dot.on{background:var(--good);box-shadow:0 0 0 4px rgba(34,197,94,.15);}

        /* timer bar */
        .timerWrap{
            position:absolute;
            left:0;right:0;bottom:0;
            height:10px;
            background:rgba(17,24,39,.08);
            display:none;
        }
        .timerBar{
            height:100%;
            width:100%;
            background:linear-gradient(90deg, var(--good), #86efac);
            transition:width .1s linear;
        }
        .timerBar.warn{ background:linear-gradient(90deg, var(--warn), #fde68a); }
        .timerBar.bad{ background:linear-gradient(90deg, var(--bad), #fca5a5); }

        /* cards */
        .cards{
            width:100%;
            max-width:760px;
            display:flex;
            flex-wrap:wrap;
            gap:10px;
            justify-content:center;
            align-items:flex-start;
            padding:14px 6px;
            z-index:5;
        }
        .cardsHeader{
            width:100%;
            text-align:center;
            margin-bottom:6px;
            color:var(--muted);
            font-size:14px;
            line-height:1.55;
        }
        .chip{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            padding:6px 12px;
            border-radius:999px;
            background:var(--chip);
            border:1px solid var(--line);
            font-weight:900;
            color:#111827;
            font-size:12px;
            margin-bottom:10px;
        }
        .cardBtn{
            min-width:78px;
            padding:12px 12px;
            border-radius:14px;
            border:1px solid var(--line);
            background:#fff;
            box-shadow:0 6px 18px rgba(0,0,0,.06);
            cursor:pointer;
            transition:transform .12s, box-shadow .12s, border-color .12s;
            font-weight:700;
            color:#111827;
        }
        .cardBtn:hover{
            transform:translateY(-2px);
            box-shadow:0 10px 24px rgba(0,0,0,.08);
            border-color:#c7d2fe;
        }
        .cardBtn:active{ transform:translateY(0); }
        .cardBtn.correct{
            background:linear-gradient(135deg, #16a34a, #22c55e);
            color:#fff;
            border-color:transparent;
            animation: correctPulse .35s;
        }
        .cardBtn.wrong{
            background:linear-gradient(135deg, #dc2626, #ef4444);
            color:#fff;
            border-color:transparent;
            animation: wrongShake .35s;
        }
        @keyframes correctPulse{0%,100%{transform:scale(1);}50%{transform:scale(1.08);}}
        @keyframes wrongShake{0%,100%{transform:translateX(0);}25%{transform:translateX(-5px);}75%{transform:translateX(5px);}}

        /* popups */
        .scorePop{
            position:absolute;
            z-index:30;
            font-weight:900;
            color:var(--good);
            text-shadow:0 8px 18px rgba(34,197,94,.25);
            animation: scoreFloat .8s ease-out forwards;
            pointer-events:none;
        }
        @keyframes scoreFloat{0%{transform:translateY(0);opacity:1;}100%{transform:translateY(-26px);opacity:0;}}
        .comboPop{
            position:absolute;
            z-index:30;
            font-weight:900;
            color:#f59e0b;
            text-shadow:0 8px 18px rgba(245,158,11,.25);
            animation: comboFloat 1s ease-out forwards;
            pointer-events:none;
        }
        @keyframes comboFloat{0%{transform:translateY(0) scale(1);opacity:1;}100%{transform:translateY(-46px) scale(1.25);opacity:0;}}

        /* result stats */
        .stats{
            margin-top:14px;
            display:grid;
            grid-template-columns:repeat(2, 1fr);
            gap:10px;
        }
        .stat{
            border:1px solid var(--line);
            border-radius:14px;
            padding:10px;
            background:#fff;
        }
        .statLabel{font-size:12px;color:var(--muted);margin-bottom:6px;}
        .statVal{font-size:20px;font-weight:900;}
        .good{color:var(--good);}
        .bad{color:var(--bad);}
        .info{color:var(--info);}
        .warn{color:var(--warn);}

        @media (max-width:520px){
            .game{min-height:520px;}
            .hudItem{min-width:150px;}
            .wordBox{font-size:30px;}
            .countdown{font-size:72px;}
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="top">
        <div>
            <div class="title">ğŸ§  ë‹¨ì–´ ì¹´ë“œ ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸ (ë ˆë²¨ ëª¨ë“œ)</div>
            <div class="subtitle">
                í™”ë©´ì— ë‚˜íƒ€ë‚˜ëŠ” ë‹¨ì–´ë¥¼ ê¸°ì–µí•œ ë’¤, ì¹´ë“œì—ì„œ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”.<br/>
                ë ˆë²¨ì´ ì˜¤ë¥¼ìˆ˜ë¡ ë‹¨ì–´ ìˆ˜ê°€ ëŠ˜ê³  ì‹œê°„ì´ ë¹¡ë¹¡í•´ì§‘ë‹ˆë‹¤. ì—°ì† ì •ë‹µì€ ì½¤ë³´ ë³´ë„ˆìŠ¤!
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="hud">
            <div class="hudItem">
                <div class="hudLabel">ë ˆë²¨</div>
                <div class="hudVal" id="uiLevel">1</div>
            </div>
            <div class="hudItem">
                <div class="hudLabel">ì ìˆ˜</div>
                <div class="hudVal" id="uiScore">0</div>
            </div>
            <div class="hudItem">
                <div class="hudLabel">ì½¤ë³´</div>
                <div class="hudVal" id="uiCombo">0</div>
            </div>
            <div class="hudItem">
                <div class="hudLabel">ìƒëª…</div>
                <div class="hearts" id="uiLives"></div>
            </div>
            <div class="hudItem">
                <div class="hudLabel">ë‚¨ì€ ì‹œê°„</div>
                <div class="hudVal" id="uiTime">--</div>
            </div>
        </div>
    </div>

    <div class="game" id="game">
        <div id="particles"></div>

        <!-- Start Layer -->
        <div class="layer show" id="layerStart">
            <div class="layerTitle">ğŸ§  ê¸°ì–µë ¥ í…ŒìŠ¤íŠ¸</div>
            <div class="layerText">
                ë‹¨ì–´ë¥¼ ì ê¹ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.<br/>
                ì´í›„ ì¹´ë“œì—ì„œ <b>ê¸°ì–µí•œ ë‹¨ì–´ë§Œ</b> ë¹ ë¥´ê²Œ ì°¾ì•„ë³´ì„¸ìš”!
            </div>
            <button class="btn" id="btnStart">ê²Œì„ ì‹œì‘</button>
        </div>

        <!-- LevelUp Layer -->
        <div class="layer" id="layerLevelup">
            <div class="layerTitle">ğŸ‰ ë ˆë²¨ ì—…!</div>
            <div class="layerText" style="margin-top:12px;">
                ë‹¤ìŒ ë ˆë²¨: <b id="uiNextLevel">2</b><br/>
                <span id="uiLevelMsg">ë” ë§ì€ ë‹¨ì–´ë¥¼ ê¸°ì–µí•´ë³´ì„¸ìš”!</span>
            </div>
            <button class="btn" id="btnNext">ë‹¤ìŒ ë ˆë²¨</button>
        </div>

        <!-- Result Layer -->
        <div class="layer" id="layerResult">
            <div class="layerTitle" id="uiResultTitle">ğŸ ê²Œì„ ì˜¤ë²„</div>
            <div class="layerText">ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</div>

            <div class="stats">
                <div class="stat">
                    <div class="statLabel">ìµœì¢… ë ˆë²¨</div>
                    <div class="statVal warn" id="uiFinalLevel">1</div>
                </div>
                <div class="stat">
                    <div class="statLabel">ì´ ì ìˆ˜</div>
                    <div class="statVal good" id="uiFinalScore">0</div>
                </div>
                <div class="stat">
                    <div class="statLabel">ìµœëŒ€ ì½¤ë³´</div>
                    <div class="statVal bad" id="uiFinalCombo">0</div>
                </div>
                <div class="stat">
                    <div class="statLabel">ë§ì¶˜ ë‹¨ì–´</div>
                    <div class="statVal info" id="uiFinalWords">0</div>
                </div>
            </div>

            <div class="btnRow">
                <button class="btn" id="btnRestart">ë‹¤ì‹œ ë„ì „</button>
                <button class="btn secondary" id="btnCloseResult">ë‹«ê¸°</button>
            </div>
        </div>

        <!-- Countdown -->
        <div class="countdown" id="countdown"></div>

        <!-- Word Display -->
        <div class="wordBox" id="wordBox"></div>

        <!-- Progress -->
        <div class="progress" id="progress">
            <div><span id="uiFound">0</span> / <span id="uiTotal">0</span></div>
            <div class="dots" id="dots"></div>
        </div>

        <!-- Cards -->
        <div class="cards" id="cards"></div>

        <!-- Timer Bar -->
        <div class="timerWrap" id="timerWrap">
            <div class="timerBar" id="timerBar"></div>
        </div>
    </div>

    <div class="panel" style="margin-top:12px;">
        <div style="font-weight:900;margin-bottom:6px;">ğŸ® ê²Œì„ ë°©ë²•</div>
        <div style="color:var(--muted);font-size:13px;line-height:1.65;">
            1) ë‹¨ì–´ê°€ ìˆœì„œëŒ€ë¡œ ì ê¹ ë“±ì¥í•©ë‹ˆë‹¤ â†’ ê¸°ì–µí•˜ê¸°<br/>
            2) ì¹´ë“œê°€ ë‚˜ì˜¤ë©´ ê¸°ì–µí•œ ë‹¨ì–´ë¥¼ ëª¨ë‘ ì°¾ê¸°<br/>
            3) ì‹œê°„ ì´ˆê³¼/ì˜¤ë‹µ ì‹œ ìƒëª… ê°ì†Œ<br/>
            4) ì—°ì† ì •ë‹µ ì‹œ ì½¤ë³´ ë³´ë„ˆìŠ¤ ì ìˆ˜
        </div>
    </div>
</div>

<script>
    (() => {
        // ==================== ë‹¨ì–´ ë°ì´í„° (ë‚œì´ë„ë³„) ====================
        const wordsByDifficulty = {
            easy: [
                "ì‚¬ê³¼","ë°”ë‚˜ë‚˜","í¬ë„","ë”¸ê¸°","ìˆ˜ë°•","ì°¸ì™¸","ë³µìˆ­ì•„","ê·¤","ë ˆëª¬","ë§ê³ ",
                "ë°¥","ë¹µ","êµ­","ì£½","ë–¡","ë©´","ë°€","ìŒ€","ì½©","íŒ¥",
                "ê¹€ì¹˜","ê³„ë€","ìš°ìœ ","ì¹˜ì¦ˆ","ë²„í„°","ì†Œê¸ˆ","ì„¤íƒ•","ê°„ì¥","ëœì¥","ê³ ì¶”ì¥",
                "ë¬¼","ë¶ˆ","í™","ë°”ëŒ","ê³µê¸°","í•˜ëŠ˜","êµ¬ë¦„","ë¬´ì§€ê°œ","ì•ˆê°œ","ì´ìŠ¬",
                "ë‹¬","í•´","ë³„","ëˆˆ","ë¹„","ì‚°","ê°•","ë°”ë‹¤","ë‚˜ë¬´","í’€",
                "ê½ƒ","ì","ë¿Œë¦¬","ì¤„ê¸°","ì—´ë§¤","ì”¨ì•—","ìˆ²","ë“¤íŒ","í˜¸ìˆ˜","í­í¬",
                "ê³ ì–‘ì´","ê°•ì•„ì§€","í† ë¼","ê³°","ì‚¬ì","í˜¸ë‘ì´","ì½”ë¼ë¦¬","ê¸°ë¦°","ì›ìˆ­ì´","íŒë‹¤",
                "ìƒˆ","ë¬¼ê³ ê¸°","ë‹­","ë¼ì§€","ì†Œ","ë§","ì–‘","ì—¼ì†Œ","ì˜¤ë¦¬","ê±°ìœ„",
                "ê°œë¯¸","ë²Œ","ë‚˜ë¹„","ì ìë¦¬","ë¬´ë‹¹ë²Œë ˆ","ë‹¬íŒ½ì´","ê°œêµ¬ë¦¬","ë±€","ê±°ë¶ì´","ì•…ì–´",
                "ë¹¨ê°•","íŒŒë‘","ë…¸ë‘","ì´ˆë¡","ê²€ì •","í°ìƒ‰","ë¶„í™","ì£¼í™©","ë³´ë¼","ê°ˆìƒ‰",
                "ë™ê·¸ë¼ë¯¸","ì„¸ëª¨","ë„¤ëª¨","ë³„ëª¨ì–‘","í•˜íŠ¸","í°","ì‘ì€","ê¸´","ì§§ì€","ë‘¥ê·¼",
                "ì—„ë§ˆ","ì•„ë¹ ","í˜•","ëˆ„ë‚˜","ë™ìƒ","ì¹œêµ¬","ì„ ìƒë‹˜","í•™ìƒ","ì•„ê¸°","í• ë¨¸ë‹ˆ",
                "í• ì•„ë²„ì§€","ì‚¼ì´Œ","ì´ëª¨","ê³ ëª¨","ì‚¬ì´Œ","ì¡°ì¹´","ë©°ëŠë¦¬","ì‚¬ìœ„","ì†ì","ì†ë…€",
                "ë¨¸ë¦¬","ëˆˆ","ì½”","ì…","ê·€","ì†","ë°œ","íŒ”","ë‹¤ë¦¬","ë°°",
                "ëª©","ì–´ê¹¨","ë¬´ë¦","ë°œëª©","ì†ëª©","ì†ê°€ë½","ë°œê°€ë½","ì´ë§ˆ","ëº¨","í„±",
                "ì±…","ì§‘","ì°¨","ë¬¸","ì°½ë¬¸","ì˜ì","ì±…ìƒ","ì¹¨ëŒ€","ì†ŒíŒŒ","ê±°ìš¸",
                "ì»µ","ì ‘ì‹œ","ìˆŸê°€ë½","ì “ê°€ë½","í¬í¬","ì¹¼","ê°€ìœ„","í’€","í…Œì´í”„","ì—°í•„"
            ],
            normal: [
                "í•™êµ","ë³‘ì›","íšŒì‚¬","ê³µì›","ì‹œì¥","ë„ì„œê´€","ì˜í™”ê´€","ë°±í™”ì ","ë§ˆíŠ¸","ì•½êµ­",
                "ì€í–‰","ìš°ì²´êµ­","ê²½ì°°ì„œ","ì†Œë°©ì„œ","ë¯¸ìˆ ê´€","ë°•ë¬¼ê´€","ì²´ìœ¡ê´€","ìˆ˜ì˜ì¥","ë†€ì´í„°","ë™ë¬¼ì›",
                "ì‹ë‹¹","ì¹´í˜","ë¹µì§‘","ê½ƒì§‘","ì„œì ","ë¯¸ìš©ì‹¤","ì„¸íƒì†Œ","ì£¼ìœ ì†Œ","í¸ì˜ì ","í˜¸í…”",
                "ì»´í“¨í„°","íœ´ëŒ€í°","í…”ë ˆë¹„ì „","ëƒ‰ì¥ê³ ","ì„¸íƒê¸°","ì—ì–´ì»¨","ì²­ì†Œê¸°","ì „ìë ˆì¸ì§€","ë¯¹ì„œê¸°","ë“œë¼ì´ê¸°",
                "ìš´ë™í™”","êµ¬ë‘","ìƒŒë“¤","ë¶€ì¸ ","ìŠ¬ë¦¬í¼","ì–‘ë§","ì¥ê°‘","ëª¨ì","ëª©ë„ë¦¬","ì•ˆê²½",
                "í‹°ì…”ì¸ ","ë°”ì§€","ì¹˜ë§ˆ","ì›í”¼ìŠ¤","ìì¼“","ì½”íŠ¸","ì í¼","ì¡°ë¼","ì…”ì¸ ","ë¸”ë¼ìš°ìŠ¤",
                "ìë™ì°¨","ë²„ìŠ¤","ì§€í•˜ì² ","ë¹„í–‰ê¸°","ê¸°ì°¨","íƒì‹œ","ìì „ê±°","ì˜¤í† ë°”ì´","íŠ¸ëŸ­","ë°°",
                "ì˜ì‚¬","ê°„í˜¸ì‚¬","êµì‚¬","ê²½ì°°ê´€","ì†Œë°©ê´€","ìš”ë¦¬ì‚¬","ë¯¸ìš©ì‚¬","ê¸°ì","ë°°ìš°","ê°€ìˆ˜",
                "ì¶•êµ¬","ì•¼êµ¬","ë†êµ¬","í…Œë‹ˆìŠ¤","ë°°ë“œë¯¼í„´","íƒêµ¬","ìˆ˜ì˜","ë‹¬ë¦¬ê¸°","ë“±ì‚°","ë‚šì‹œ",
                "ë…ì„œ","ì˜í™”ê°ìƒ","ìŒì•…ê°ìƒ","ìš”ë¦¬","ê·¸ë¦¼ê·¸ë¦¬ê¸°","ì‚¬ì§„ì´¬ì˜","ì—¬í–‰","ìº í•‘","ê²Œì„","í¼ì¦"
            ],
            hard: [
                "ê²½ì œí•™","ì‹¬ë¦¬í•™","ì² í•™","ì‚¬íšŒí•™","ì¸ë¥˜í•™","ì •ì¹˜í•™","ìƒë¬¼í•™","ë¬¼ë¦¬í•™","í™”í•™","ì²œë¬¸í•™",
                "ìˆ˜í•™","í†µê³„í•™","ì–¸ì–´í•™","ê³ ê³ í•™","ì§€ë¦¬í•™","ì—­ì‚¬í•™","ë²•í•™","ì˜í•™","ì•½í•™","ê³µí•™",
                "ì¸ê³µì§€ëŠ¥","ë¸”ë¡ì²´ì¸","ì‚¬ë¬¼ì¸í„°ë„·","ë¹…ë°ì´í„°","í´ë¼ìš°ë“œ","ê°€ìƒí˜„ì‹¤","ì¦ê°•í˜„ì‹¤","ë“œë¡ ","ë¡œë´‡ê³µí•™","ë‚˜ë…¸ê¸°ìˆ ",
                "ë¨¸ì‹ ëŸ¬ë‹","ë”¥ëŸ¬ë‹","ì•Œê³ ë¦¬ì¦˜","ë°ì´í„°ë² ì´ìŠ¤","ì‚¬ì´ë²„ë³´ì•ˆ","ì•”í˜¸í™”í","ë©”íƒ€ë²„ìŠ¤","ë””ì§€í„¸íŠ¸ìœˆ","ì—£ì§€ì»´í“¨íŒ…","5Gí†µì‹ ",
                "ì§€ì†ê°€ëŠ¥ì„±","ê¸°í›„ë³€í™”","ìƒíƒœê³„","ìƒë¬¼ë‹¤ì–‘ì„±","ì¬ìƒì—ë„ˆì§€","íƒ„ì†Œì¤‘ë¦½","ìˆœí™˜ê²½ì œ","ì¹œí™˜ê²½","ìœ ê¸°ë†","ê³µì •ë¬´ì—­",
                "ì„¸ê³„ë¬¸í™”ìœ ì‚°","ë¬´í˜•ë¬¸í™”ì¬","ì „í†µê³µì˜ˆ","ë¯¼ì†ì˜ˆìˆ ","ê³ ì „ë¬¸í•™","í˜„ëŒ€ë¯¸ìˆ ","ì¶”ìƒí™”","ì¸ìƒì£¼ì˜","ë¥´ë„¤ìƒìŠ¤","ë°”ë¡œí¬",
                "ì˜¤í˜ë¼","ë°œë ˆ","ë®¤ì§€ì»¬","êµí–¥ê³¡","í˜‘ì£¼ê³¡","ì†Œë‚˜íƒ€","ì¬ì¦ˆ","í´ë˜ì‹","êµ­ì•…","ì „í†µë¬´ìš©"
            ],
            extreme: [
                "í˜•ì´ìƒí•™","ì¸ì‹ë¡ ","ì¡´ì¬ë¡ ","í˜„ìƒí•™","í•´ì„í•™","êµ¬ì¡°ì£¼ì˜","í›„ê¸°êµ¬ì¡°ì£¼ì˜","í•´ì²´ì£¼ì˜","ì‹¤ì¡´ì£¼ì˜","í—ˆë¬´ì£¼ì˜",
                "ì–‘ìì—­í•™","ìƒëŒ€ì„±ì´ë¡ ","ì´ˆëˆì´ë¡ ","ì•”í‘ë¬¼ì§ˆ","ì•”í‘ì—ë„ˆì§€","ë¸”ë™í™€","ì¤‘ë ¥íŒŒ","ë°˜ë¬¼ì§ˆ","í‰ìŠ¤ì…ì","ì¿¼í¬",
                "ì–‘ìì»´í“¨íŒ…","ì´ˆì „ë„ì²´","ê·¸ë˜í•€","íƒ„ì†Œë‚˜ë…¸íŠœë¸Œ","í”Œë¼ì¦ˆë§ˆ","í•µìœµí•©","ë°˜ë„ì²´","ê´‘í†µì‹ ","ì´ˆìŒíŒŒ","ë‰´ë¡œëª¨í”½",
                "ìœ ì „ê³µí•™","í•©ì„±ìƒë¬¼í•™","ë‹¨ë°±ì§ˆê³µí•™","ì¤„ê¸°ì„¸í¬","ìœ ì „ìí¸ì§‘","í¬ë¦¬ìŠ¤í¼","ë°”ì´ì˜¤ì„¼ì„œ","ë‚˜ë…¸ë¡œë´‡","ë¶„ìê¸°ê³„","ì •ë°€ì˜ë£Œ",
                "ë©”íƒ€ì¸ì§€","ì¸ì§€ë¶€ì¡°í™”","ì¡°ê±´í˜•ì„±","ê°•í™”í•™ìŠµ","í–‰ë™ìˆ˜ì •","ì¸ì§€í–‰ë™ì¹˜ë£Œ","ë§ˆìŒì±™ê¹€","ë…¸ì¶œì¹˜ë£Œ","ì‘ì—…ê¸°ì–µ","ì „ë§ê¸°ì–µ",
                "í—Œë²•ì¬íŒì†Œ","êµ­ì œì‚¬ë²•ì¬íŒì†Œ","ê³µì •ê±°ë˜ìœ„ì›íšŒ","ë°©ì†¡í†µì‹ ìœ„ì›íšŒ","ê°œì¸ì •ë³´ë³´í˜¸ìœ„ì›íšŒ","êµ­ê°€ì¸ê¶Œìœ„ì›íšŒ","ì„ ê±°ê´€ë¦¬ìœ„ì›íšŒ","ê°ì‚¬ì›","ê²€ì°°ì²­","ê²½ì°°ì²­"
            ]
        };

        // ==================== ë ˆë²¨ ì„¤ì • ====================
        const levelConfig = {
            1:  { words: 2,  cards: 12, showTime: 800,  selectTime: 15, difficulty: 'easy' },
            2:  { words: 3,  cards: 15, showTime: 700,  selectTime: 18, difficulty: 'easy' },
            3:  { words: 4,  cards: 18, showTime: 650,  selectTime: 20, difficulty: 'easy' },
            4:  { words: 5,  cards: 20, showTime: 600,  selectTime: 22, difficulty: 'normal' },
            5:  { words: 6,  cards: 24, showTime: 550,  selectTime: 25, difficulty: 'normal' },
            6:  { words: 7,  cards: 28, showTime: 500,  selectTime: 28, difficulty: 'normal' },
            7:  { words: 8,  cards: 30, showTime: 450,  selectTime: 30, difficulty: 'hard' },
            8:  { words: 9,  cards: 32, showTime: 400,  selectTime: 32, difficulty: 'hard' },
            9:  { words: 10, cards: 35, showTime: 350,  selectTime: 35, difficulty: 'hard' },
            10: { words: 12, cards: 40, showTime: 300,  selectTime: 40, difficulty: 'extreme' }
        };

        // ==================== DOM ====================
        const game = document.getElementById('game');
        const particles = document.getElementById('particles');

        const layerStart = document.getElementById('layerStart');
        const layerLevelup = document.getElementById('layerLevelup');
        const layerResult = document.getElementById('layerResult');

        const btnStart = document.getElementById('btnStart');
        const btnNext = document.getElementById('btnNext');
        const btnRestart = document.getElementById('btnRestart');
        const btnCloseResult = document.getElementById('btnCloseResult');

        const uiLevel = document.getElementById('uiLevel');
        const uiScore = document.getElementById('uiScore');
        const uiCombo = document.getElementById('uiCombo');
        const uiLives = document.getElementById('uiLives');
        const uiTime = document.getElementById('uiTime');

        const countdown = document.getElementById('countdown');
        const wordBox = document.getElementById('wordBox');

        const progress = document.getElementById('progress');
        const uiFound = document.getElementById('uiFound');
        const uiTotal = document.getElementById('uiTotal');
        const dots = document.getElementById('dots');

        const cards = document.getElementById('cards');

        const timerWrap = document.getElementById('timerWrap');
        const timerBar = document.getElementById('timerBar');

        const uiNextLevel = document.getElementById('uiNextLevel');
        const uiLevelMsg = document.getElementById('uiLevelMsg');

        const uiFinalLevel = document.getElementById('uiFinalLevel');
        const uiFinalScore = document.getElementById('uiFinalScore');
        const uiFinalCombo = document.getElementById('uiFinalCombo');
        const uiFinalWords = document.getElementById('uiFinalWords');
        const uiResultTitle = document.getElementById('uiResultTitle');

        // ==================== ìƒíƒœ ====================
        const state = {
            level: 1,
            score: 0,
            combo: 0,
            maxCombo: 0,
            lives: 3,
            totalCorrect: 0,
            selectedWords: [],
            displayedWords: [],
            foundWords: [],
            isPlaying: false,
            timeLeft: 0,
            totalTime: 0,
            timer: null
        };

        const anims = ["flip","slide","fade","zoom","bounce","rotate","left","right","elastic"];

        // ==================== utils ====================
        function show(el){ el.classList.add('show'); }
        function hide(el){ el.classList.remove('show'); }
        function fmt(n){ return (n||0).toLocaleString(); }

        function createParticles(){
            const count = 22;
            for(let i=0;i<count;i++){
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = (Math.random()*100) + '%';
                p.style.top = (Math.random()*100) + '%';
                p.style.animationDelay = (Math.random()*8) + 's';
                p.style.animationDuration = (6 + Math.random()*4) + 's';
                particles.appendChild(p);
            }
        }

        function getLevelConfig(level){
            if(level <= 10) return levelConfig[level];

            const base = levelConfig[10];
            const extra = level - 10;
            return {
                words: Math.min(base.words + extra, 20),
                cards: Math.min(base.cards + extra * 3, 60),
                showTime: Math.max(base.showTime - extra * 20, 150),
                selectTime: base.selectTime + extra * 2,
                difficulty: 'extreme'
            };
        }

        function getRandomWords(count, difficulty){
            let pool = [];
            const diffs = ['easy','normal','hard','extreme'];
            const idx = diffs.indexOf(difficulty);

            for(let i=0;i<=idx;i++) pool = pool.concat(wordsByDifficulty[diffs[i]]);
            const shuffled = [...pool].sort(()=>Math.random()-0.5);

            return shuffled.slice(0, count);
        }

        function updateHUD(){
            uiLevel.textContent = state.level;
            uiScore.textContent = fmt(state.score);
            uiCombo.textContent = state.combo;
            uiTime.textContent = state.timer ? (Math.ceil(state.timeLeft) + 'ì´ˆ') : '--';

            uiLives.innerHTML = '';
            for(let i=0;i<3;i++){
                const span = document.createElement('span');
                span.className = 'heart' + (i >= state.lives ? ' lost' : '');
                span.textContent = 'â¤';
                uiLives.appendChild(span);
            }
        }

        function updateProgress(){
            const total = state.selectedWords.length;
            const found = state.foundWords.length;
            uiFound.textContent = found;
            uiTotal.textContent = total;

            dots.innerHTML = '';
            for(let i=0;i<total;i++){
                const d = document.createElement('div');
                d.className = 'dot' + (i < found ? ' on' : '');
                dots.appendChild(d);
            }
        }

        function resetBoard(){
            cards.innerHTML = '';
            progress.style.display = 'none';
            timerWrap.style.display = 'none';
            wordBox.className = 'wordBox';
            wordBox.style.display = 'none';
        }

        function showCountdown(cb){
            let count = 3;
            countdown.style.display = 'block';

            const tick = () => {
                if(count > 0){
                    countdown.textContent = count;
                    countdown.style.animation = 'none';
                    void countdown.offsetHeight;
                    countdown.style.animation = 'countPop .8s ease-out';
                    count--;
                    setTimeout(tick, 800);
                } else {
                    countdown.textContent = 'GO!';
                    countdown.style.animation = 'none';
                    void countdown.offsetHeight;
                    countdown.style.animation = 'countPop .8s ease-out';
                    setTimeout(() => {
                        countdown.style.display = 'none';
                        cb && cb();
                    }, 600);
                }
            };
            tick();
        }

        function stopTimer(){
            if(state.timer){
                clearInterval(state.timer);
                state.timer = null;
            }
            updateHUD();
        }

        function startTimer(seconds){
            state.totalTime = seconds;
            state.timeLeft = seconds;

            timerWrap.style.display = 'block';
            progress.style.display = 'block';

            const render = () => {
                const pct = Math.max(0, (state.timeLeft / state.totalTime) * 100);
                timerBar.style.width = pct + '%';
                timerBar.classList.remove('warn','bad');
                if(pct <= 20) timerBar.classList.add('bad');
                else if(pct <= 40) timerBar.classList.add('warn');
                uiTime.textContent = Math.ceil(state.timeLeft) + 'ì´ˆ';
            };

            render();
            state.timer = setInterval(() => {
                state.timeLeft = Math.max(0, state.timeLeft - 0.1);
                if(state.timeLeft <= 0){
                    stopTimer();
                    timeUp();
                    return;
                }
                render();
            }, 100);
        }

        function scorePopup(x, y, points){
            const pop = document.createElement('div');
            pop.className = 'scorePop';
            pop.textContent = `+${points}`;
            pop.style.left = x + 'px';
            pop.style.top = y + 'px';
            game.appendChild(pop);
            setTimeout(() => pop.remove(), 800);
        }

        function comboPopup(text){
            const pop = document.createElement('div');
            pop.className = 'comboPop';
            pop.textContent = text;
            pop.style.left = '50%';
            pop.style.top = '22%';
            pop.style.transform = 'translateX(-50%)';
            game.appendChild(pop);
            setTimeout(() => pop.remove(), 1000);
        }

        function messageLayer(text, cb){
            const temp = document.createElement('div');
            temp.className = 'layer show';
            temp.style.zIndex = 25;
            temp.innerHTML = `<div class="layerTitle">${text}</div>`;
            game.appendChild(temp);
            setTimeout(() => {
                temp.remove();
                cb && cb();
            }, 1200);
        }

        // ==================== game flow ====================
        function startGame(){
            state.level = 1;
            state.score = 0;
            state.combo = 0;
            state.maxCombo = 0;
            state.lives = 3;
            state.totalCorrect = 0;
            state.isPlaying = true;

            updateHUD();
            resetBoard();
            hide(layerStart);
            hide(layerResult);
            hide(layerLevelup);

            showCountdown(startLevel);
        }

        function startLevel(){
            hide(layerLevelup);
            resetBoard();

            const cfg = getLevelConfig(state.level);
            state.selectedWords = getRandomWords(cfg.words, cfg.difficulty);
            state.foundWords = [];

            updateProgress();
            showWords(cfg.showTime);
        }

        function showWords(showTime){
            let idx = 0;

            const showNext = () => {
                if(idx >= state.selectedWords.length){
                    setTimeout(showCards, 220);
                    return;
                }
                const word = state.selectedWords[idx];
                const anim = anims[idx % anims.length];

                wordBox.textContent = word;
                wordBox.style.display = 'block';
                wordBox.className = 'wordBox show anim-' + anim;

                idx++;

                setTimeout(() => {
                    wordBox.className = 'wordBox';
                    wordBox.style.display = 'none';
                    setTimeout(showNext, 160);
                }, showTime);
            };

            showNext();
        }

        function showCards(){
            const cfg = getLevelConfig(state.level);

            // extra words
            const extraNeed = Math.max(0, cfg.cards - state.selectedWords.length);
            const extrasRaw = getRandomWords(extraNeed + 10, cfg.difficulty)
            .filter(w => !state.selectedWords.includes(w));
            const extras = extrasRaw.slice(0, extraNeed);

            state.displayedWords = [...state.selectedWords, ...extras]
            .slice(0, cfg.cards)
            .sort(()=>Math.random()-0.5);

            const diffNames = { easy:'ì‰¬ì›€', normal:'ë³´í†µ', hard:'ì–´ë ¤ì›€', extreme:'ê·¹í•œ' };

            cards.innerHTML = `
      <div class="cardsHeader">
        <div class="chip">ë‚œì´ë„: ${diffNames[cfg.difficulty] || cfg.difficulty}</div><br/>
        ê¸°ì–µí•œ ë‹¨ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”!
      </div>
    `;

            state.displayedWords.forEach((w, i) => {
                const b = document.createElement('button');
                b.type = 'button';
                b.className = 'cardBtn';
                b.textContent = w;
                b.dataset.word = w;
                b.style.opacity = '0';
                b.style.animation = `fadeIn .28s ${(i*0.03).toFixed(2)}s forwards`;
                cards.appendChild(b);
            });

            progress.style.display = 'block';
            updateProgress();
            startTimer(cfg.selectTime);
            updateHUD();
        }

        function onCardClick(btn){
            if(!state.isPlaying) return;
            if(btn.classList.contains('correct') || btn.classList.contains('wrong')) return;

            const word = btn.dataset.word;

            // correct
            if(state.selectedWords.includes(word) && !state.foundWords.includes(word)){
                btn.classList.add('correct');
                state.foundWords.push(word);

                state.combo++;
                state.maxCombo = Math.max(state.maxCombo, state.combo);

                const base = 100 * state.level;
                const comboBonus = Math.floor(base * state.combo * 0.1);
                const pts = base + comboBonus;
                state.score += pts;
                state.totalCorrect++;

                // popup position
                const r = btn.getBoundingClientRect();
                const g = game.getBoundingClientRect();
                const x = (r.left - g.left) + r.width/2;
                const y = (r.top - g.top);

                scorePopup(x, y, pts);

                if(state.combo >= 3){
                    const text = state.combo >= 6 ? `AMAZING x${state.combo}! ğŸŒŸ` : `COMBO x${state.combo}! ğŸ”¥`;
                    comboPopup(text);
                }

                updateHUD();
                updateProgress();

                if(state.foundWords.length === state.selectedWords.length){
                    levelComplete();
                }
                return;
            }

            // wrong
            btn.classList.add('wrong');
            state.combo = 0;
            state.lives--;

            updateHUD();

            if(state.lives <= 0){
                gameOver();
            }
        }

        function timeUp(){
            state.combo = 0;
            state.lives--;
            updateHUD();

            if(state.lives <= 0){
                gameOver();
                return;
            }
            messageLayer('â° ì‹œê°„ ì´ˆê³¼!', () => resetLevel());
        }

        function resetLevel(){
            stopTimer();
            resetBoard();
            showCountdown(startLevel);
        }

        function levelComplete(){
            stopTimer();
            state.isPlaying = false;

            // time bonus
            const bonus = Math.floor(state.timeLeft * 10 * state.level);
            state.score += bonus;

            updateHUD();

            setTimeout(() => {
                state.level++;
                uiNextLevel.textContent = state.level;

                const msgs = [
                    'ë” ë§ì€ ë‹¨ì–´ë¥¼ ê¸°ì–µí•´ë³´ì„¸ìš”!',
                    'ì†ë„ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤!',
                    'ì§‘ì¤‘ë ¥ì„ ë°œíœ˜í•˜ì„¸ìš”!',
                    'ëŒ€ë‹¨í•´ìš”! ê³„ì† ë„ì „!',
                    'ê¸°ì–µë ¥ ì²œì¬ì‹œë„¤ìš”!'
                ];
                uiLevelMsg.textContent = msgs[Math.min(state.level - 2, msgs.length - 1)] || 'ê³„ì† ë„ì „í•˜ì„¸ìš”!';

                resetBoard();
                show(layerLevelup);
                state.isPlaying = true;
            }, 450);
        }

        function gameOver(){
            stopTimer();
            state.isPlaying = false;

            resetBoard();

            uiResultTitle.textContent = 'ğŸ ê²Œì„ ì˜¤ë²„';
            uiFinalLevel.textContent = state.level;
            uiFinalScore.textContent = fmt(state.score);
            uiFinalCombo.textContent = state.maxCombo;
            uiFinalWords.textContent = state.totalCorrect;

            show(layerResult);
        }

        // ==================== events ====================
        btnStart.addEventListener('click', startGame);
        btnNext.addEventListener('click', () => {
            hide(layerLevelup);
            showCountdown(startLevel);
        });
        btnRestart.addEventListener('click', () => {
            hide(layerResult);
            startGame();
        });
        btnCloseResult.addEventListener('click', () => {
            hide(layerResult);
            show(layerStart);
        });

        cards.addEventListener('click', (e) => {
            const btn = e.target.closest('.cardBtn');
            if(!btn) return;
            onCardClick(btn);
        });

        // ==================== init ====================
        createParticles();
        updateHUD();
        show(layerStart);
    })();
</script>
</body>
</html>