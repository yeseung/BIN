<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>Pomodoro Timer - 포모도로 타이머</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- 선택: 아이콘용 Font Awesome (없어도 동작) -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 24px 10px 40px;
            font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR",
            "Malgun Gothic", system-ui, sans-serif;
            background: #f3f4f6;
            color: #111827;
        }

        .page {
            max-width: 900px;
            margin: 0 auto;
        }

        .intro-box {
            background-color: #f9fafb;
            padding: 18px 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            border: 1px solid #e5e7eb;
            line-height: 1.6;
            font-size: 15px;
            color: #374151;
        }

        .card {
            background: #ffffff;
            border-radius: 14px;
            padding: 26px 22px 30px;
            box-shadow: 0 8px 22px rgba(15,23,42,0.08);
            border: 1px solid #e5e7eb;
            text-align: center;
        }

        .badge-label {
            display: inline-block;
            padding: 6px 18px;
            border-radius: 999px;
            font-weight: 600;
            font-size: 16px;
            background: #38bdf8;
            color: #fff;
            margin-bottom: 8px;
        }

        .timer-display {
            font-size: clamp(48px, 7vw, 80px);
            font-weight: 300;
            letter-spacing: 2px;
            margin: 10px 0 20px;
            color: #111827;
        }

        .btn-row {
            margin-bottom: 20px;
        }

        .btn {
            border-radius: 999px;
            border: none;
            padding: 10px 16px;
            font-size: 18px;
            cursor: pointer;
            color: #fff;
            background: #38bdf8;
            margin: 0 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: background .15s ease, transform .1s ease,
            box-shadow .15s ease;
            min-width: 46px;
        }

        .btn i { margin: 0 2px; }

        .btn:hover:not(:disabled) {
            background: #0ea5e9;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(14,165,233,0.45);
        }

        .btn:disabled {
            opacity: 0.55;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .btn-reset {
            background: #f97316;
        }

        .btn-reset:hover:not(:disabled) {
            background: #ea580c;
            box-shadow: 0 4px 12px rgba(248,113,22,0.45);
        }

        .inputs-row {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 18px;
        }

        .input-group {
            text-align: left;
            min-width: 150px;
        }

        .input-group label {
            display: block;
            font-size: 14px;
            margin-bottom: 6px;
            color: #4b5563;
        }

        .input-group input[type="number"] {
            width: 100%;
            padding: 8px 10px;
            font-size: 15px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            outline: none;
            transition: border .15s ease, box-shadow .15s ease;
        }

        .input-group input[type="number"]:focus {
            border-color: #38bdf8;
            box-shadow: 0 0 0 2px rgba(56,189,248,0.3);
        }

        @media (max-width: 600px) {
            .card { padding: 22px 16px 26px; }
            .inputs-row { gap: 12px; }
        }
    </style>
</head>
<body>
<div class="page">

    <div class="intro-box">
        포모도로 타이머는 <strong>‘25분 집중 + 5분 휴식’</strong> 주기로
        집중력과 업무 효율을 높여주는 간단하고 실용적인 시간 관리 도구입니다.
        작업 시간과 휴식 시간을 자유롭게 설정할 수 있으며,
        시스템이 자동으로 단계 전환을 알려줍니다. 미루는 습관을 줄이고
        리듬을 유지하는 데 도움이 됩니다.
    </div>

    <div class="card">
        <div class="mb-2">
            <span id="label" class="badge-label">작업 중</span>
        </div>

        <div id="display" class="timer-display">25:00</div>

        <div class="btn-row">
            <button id="btn-start" class="btn" title="start">
                <i class="fa-solid fa-play fa-fw"></i>
            </button>
            <button id="btn-pause" class="btn" title="pause" disabled>
                <i class="fa-solid fa-pause fa-fw"></i>
            </button>
            <button id="btn-reset" class="btn btn-reset" title="reset">
                <i class="fa-solid fa-broom fa-fw"></i>
            </button>
        </div>

        <div class="inputs-row">
            <div class="input-group">
                <label for="work-minutes">작업 시간 (분)</label>
                <input id="work-minutes" type="number" min="1" value="25">
            </div>
            <div class="input-group">
                <label for="break-minutes">휴식 시간 (분)</label>
                <input id="break-minutes" type="number" min="1" value="5">
            </div>
        </div>
    </div>
</div>

<script>
    (function () {
        // --- 상태 값 ---
        let workDuration = 25;   // minutes
        let breakDuration = 5;   // minutes
        let isRunning = false;
        let isWork = true;
        let secondsLeft = workDuration * 60;
        let timerId = null;

        // --- 요소 참조 ---
        const displayEl = document.getElementById('display');
        const labelEl = document.getElementById('label');
        const startBtn = document.getElementById('btn-start');
        const pauseBtn = document.getElementById('btn-pause');
        const resetBtn = document.getElementById('btn-reset');
        const workInput = document.getElementById('work-minutes');
        const breakInput = document.getElementById('break-minutes');

        // 효과음 (경로는 프로젝트에 맞게 수정하세요)
        const ding = new Audio('./assets/sound/alien-clock.mp3');
        ding.load();

        // --- 유틸 함수 ---
        function formatTime(sec) {
            const m = Math.floor(sec / 60).toString().padStart(2, '0');
            const s = (sec % 60).toString().padStart(2, '0');
            return m + ':' + s;
        }

        function updateDisplay() {
            displayEl.textContent = formatTime(secondsLeft);
            labelEl.textContent = isWork ? '작업 중' : '휴식 중';
        }

        function updateButtons() {
            startBtn.disabled = isRunning;
            pauseBtn.disabled = !isRunning;
        }

        function saveToStorage() {
            localStorage.setItem('pomodoro_work', String(workDuration));
            localStorage.setItem('pomodoro_break', String(breakDuration));
        }

        // --- 타이머 제어 ---
        function startTimer() {
            if (isRunning) return;
            isRunning = true;
            updateButtons();

            // 첫 실행 시 재생 시도 (브라우저 정책에 걸리면 무시)
            ding.play().catch(() => {});

            timerId = setInterval(() => {
                if (secondsLeft > 0) {
                    secondsLeft--;
                    updateDisplay();
                } else {
                    // 구간 전환
                    isWork = !isWork;
                    secondsLeft = (isWork ? workDuration : breakDuration) * 60;
                    updateDisplay();
                    ding.play().catch(() => {});
                }
            }, 1000);
        }

        function pauseTimer() {
            if (timerId) {
                clearInterval(timerId);
                timerId = null;
            }
            isRunning = false;
            updateButtons();
        }

        function resetTimer() {
            pauseTimer();
            isWork = true;
            secondsLeft = workDuration * 60;
            updateDisplay();
        }

        // --- 입력 처리 ---
        function handleWorkChange() {
            let val = parseInt(workInput.value, 10);
            if (isNaN(val) || val <= 0) val = 1;
            workDuration = val;
            workInput.value = val;
            if (!isRunning && isWork) {
                secondsLeft = workDuration * 60;
                updateDisplay();
            }
            saveToStorage();
        }

        function handleBreakChange() {
            let val = parseInt(breakInput.value, 10);
            if (isNaN(val) || val <= 0) val = 1;
            breakDuration = val;
            breakInput.value = val;
            if (!isRunning && !isWork) {
                secondsLeft = breakDuration * 60;
                updateDisplay();
            }
            saveToStorage();
        }

        // --- 초기 설정 ---
        function initFromStorage() {
            const savedWork = parseInt(localStorage.getItem('pomodoro_work'), 10);
            const savedBreak = parseInt(localStorage.getItem('pomodoro_break'), 10);
            if (!isNaN(savedWork) && savedWork > 0) workDuration = savedWork;
            if (!isNaN(savedBreak) && savedBreak > 0) breakDuration = savedBreak;

            workInput.value = workDuration;
            breakInput.value = breakDuration;
            secondsLeft = workDuration * 60;
            updateDisplay();
            updateButtons();
        }

        // --- 이벤트 연결 ---
        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);
        workInput.addEventListener('change', handleWorkChange);
        breakInput.addEventListener('change', handleBreakChange);

        // 시작 시 로드
        initFromStorage();
    })();
</script>
</body>
</html>
