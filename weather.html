
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë‚ ì”¨ ê²€ìƒ‰</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Rubik', 'Noto Sans KR', sans-serif;
    }

    select:focus,
    input:focus {
      outline: none;
      border-color: #3b82f6;
    }
  </style>
</head>

<body
        class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white min-h-screen flex flex-col items-center justify-center p-6">

<div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 w-full max-w-xl text-center">
  <h1 class="text-2xl font-semibold mb-4">ğŸŒ¦ï¸ ë‚ ì”¨ ì •ë³´ ê²€ìƒ‰</h1>

  <div class="mb-4">
    <input id="searchInput" type="text" placeholder="ë„ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì„œìš¸, ë¶€ì‚°, ë„ì¿„, ë‰´ìš•)"
           class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600 text-lg" />
  </div>

  <div class="mb-6">
    <select id="citySelect"
            class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:bg-gray-700 dark:border-gray-600 text-lg">
      <option value="">ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
    </select>
  </div>

  <button onclick="fetchWeather()" class="px-6 py-2 bg-blue-500 text-white rounded-xl hover:brightness-110">
    ğŸ” ë‚ ì”¨ í™•ì¸
  </button>

  <div id="result" class="mt-6 text-left hidden bg-blue-100 dark:bg-gray-700 p-5 rounded-xl shadow"></div>
</div>

<script>
  const cities = [
    { name: "ì„œìš¸", lat: 37.5665, lon: 126.9780 },
    { name: "ë¶€ì‚°", lat: 35.1796, lon: 129.0756 },
    { name: "ëŒ€êµ¬", lat: 35.8722, lon: 128.6025 },
    { name: "ì œì£¼", lat: 33.4996, lon: 126.5312 },
    { name: "ë„ì¿„", lat: 35.6895, lon: 139.6917 },
    { name: "ë² ì´ì§•", lat: 39.9042, lon: 116.4074 },
    { name: "íŒŒë¦¬", lat: 48.8566, lon: 2.3522 },
    { name: "ëŸ°ë˜", lat: 51.5074, lon: -0.1278 },
    { name: "ë‰´ìš•", lat: 40.7128, lon: -74.0060 },
    { name: "ì›Œì‹±í„´", lat: 38.9072, lon: -77.0369 },
    { name: "ë¡œë§ˆ", lat: 41.9028, lon: 12.4964 },
    { name: "ì‹œë“œë‹ˆ", lat: -33.8688, lon: 151.2093 },
    { name: "ìì¹´ë¥´íƒ€", lat: -6.2088, lon: 106.8456 },
    { name: "ì„œìš¸", lat: 37.5665, lon: 126.9780 }
  ];

  const citySelect = document.getElementById('citySelect');
  const searchInput = document.getElementById('searchInput');
  const result = document.getElementById('result');

  // ë“œë¡­ë‹¤ìš´ì— ë„ì‹œ ì¶”ê°€
  cities.forEach(c => {
    const option = document.createElement('option');
    option.value = `${c.lat},${c.lon}`;
    option.textContent = c.name;
    citySelect.appendChild(option);
  });

  // ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ ìë™ ì„ íƒ
  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim().toLowerCase();
    const match = cities.find(c => c.name.toLowerCase().includes(query));
    if (match) {
      citySelect.value = `${match.lat},${match.lon}`;
    }
  });

  function getWeatherEmoji(code) {
    if (code === 0) return "â˜€ï¸ ë§‘ìŒ";
    if (code === 1 || code === 2) return "â›… ë¶€ë¶„ íë¦¼";
    if (code === 3) return "â˜ï¸ íë¦¼";
    if (code >= 45 && code <= 48) return "ğŸŒ«ï¸ ì•ˆê°œ";
    if (code >= 51 && code <= 67) return "ğŸŒ¦ï¸ ì´ìŠ¬ë¹„";
    if (code >= 71 && code <= 77) return "ğŸŒ¨ï¸ ëˆˆ";
    if (code >= 80 && code <= 82) return "ğŸŒ§ï¸ ì†Œë‚˜ê¸°";
    if (code >= 95) return "â›ˆï¸ ë‡Œìš°";
    return "â“ ì•Œ ìˆ˜ ì—†ìŒ";
  }

  async function fetchWeather() {
    const value = citySelect.value;
    if (!value) return alert("ë„ì‹œë¥¼ ì„ íƒí•˜ê±°ë‚˜ ê²€ìƒ‰í•´ ì£¼ì„¸ìš”.");

    const [lat, lon] = value.split(',');
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&timezone=auto`;

    const res = await fetch(url);
    const data = await res.json();
    const weather = data.current_weather;

    const cityName = cities.find(c => `${c.lat},${c.lon}` === value)?.name || "ì„ íƒí•œ ë„ì‹œ";

    result.innerHTML = `
        <h2 class="text-xl font-semibold mb-2">ğŸ“ ${cityName}</h2>
        <div class="text-lg">ğŸŒ¡ï¸ ì˜¨ë„: <strong>${weather.temperature}Â°C</strong></div>
        <div class="text-lg">ğŸŒ¤ï¸ ìƒíƒœ: ${getWeatherEmoji(weather.weathercode)}</div>
        <div class="text-lg">ğŸ’¨ í’ì†: ${weather.windspeed} km/h</div>
        <div class="text-sm mt-2">ğŸ•’ ê¸°ì¤€ ì‹œê°„: ${new Date(weather.time).toLocaleString()}</div>
      `;
    result.classList.remove('hidden');
  }
</script>

</body>

</html>