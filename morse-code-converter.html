<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Morse Code Converter - ëª¨ìŠ¤ë¶€í˜¸ ë³€í™˜ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body{
            margin:0;
            font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR","Malgun Gothic",system-ui,sans-serif;
            background:#f4f5f7;
            color:#111827;
        }
        .page-wrap{
            max-width:960px;
            margin:32px auto 40px;
            padding:0 16px;
        }
        .top-info{
            background-color:#EAF6FD;
            padding:16px 20px;
            border-left:4px solid #0091D7;
            margin-top:5px;
            margin-bottom:24px;
            word-break:break-all;
            border-radius:8px;
            font-size:14px;
            color:#0f172a;
        }

        .morse-wrapper {
            max-width: 720px;
            margin: 0 auto 40px;
            padding: 30px 24px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            text-align: center;
        }

        .morse-wrapper textarea {
            width: 100%;
            height: 110px;
            padding: 12px 14px;
            font-size: 16px;
            border-radius: 10px;
            border: 1px solid #ccc;
            resize: none;
            margin-bottom: 14px;
            transition: border 0.2s;
            font-family: inherit;
        }
        .morse-wrapper textarea:focus {
            border-color: #888;
            outline: none;
        }

        .morse-wrapper button {
            margin: 6px;
            padding: 10px 20px;
            background: #f5f5f5;
            color: #222;
            border: 1px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            font-size: 15px;
            transition: background 0.2s ease, transform 0.15s ease;
            font-family: inherit;
        }
        .morse-wrapper button:hover {
            background: #e8e8e8;
            transform: scale(1.02);
        }

        .speed-buttons {
            margin-top: 12px;
        }
        .speed-buttons span{
            font-size:14px;
            color:#555;
            margin-right:4px;
        }
        .speed-buttons button {
            font-size: 14px;
            padding: 8px 14px;
            margin: 4px;
            border-radius: 6px;
            transition: background 0.2s ease, transform 0.12s ease;
        }
        .speed-buttons button:hover {
            background: #ddd;
            transform: scale(1.02);
        }
        .speed-buttons button.active {
            background: #333;
            color: #fff;
        }

        #morseOutput {
            margin-top: 14px;
            height: 100px;
        }

        #morseVisual {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin-top: 20px;
            flex-wrap: wrap;
            min-height: 22px;
        }
        .dot, .dash {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ccc;
            transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
        }
        .dot { }
        .dash { }

        .morse-visual-active {
            background: #333 !important;
            transform: scale(1.3);
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }

        .morse-wrapper table{
            margin: 18px auto;
            border-collapse: collapse;
            font-size: 14px;
        }
        .morse-wrapper th,
        .morse-wrapper td{
            border:1px solid #ddd;
            padding:6px 10px;
        }
        .morse-wrapper th{
            background:#f3f4f6;
            font-weight:600;
        }
        .morse-wrapper h2{
            margin-top:26px;
            margin-bottom:8px;
            font-size:18px;
        }

        @media(max-width:640px){
            .morse-wrapper{
                padding:22px 16px;
            }
        }
    </style>
</head>
<body>
<div class="page-wrap">

    <div class="top-info">
        ğŸ” ëª¨ìŠ¤ë¶€í˜¸ ë³€í™˜ê¸°ë¡œ í•œê¸€Â·ì˜ì–´Â·ì•ŒíŒŒë²³Â·ìˆ«ì ì—°ìŠµ! ì…ë ¥í•œ ë¬¸ì¥ì„ ëª¨ìŠ¤ë¶€í˜¸ì™€ ì†Œë¦¬ë¡œ ë°”ë¡œ ë³€í™˜ ê°€ëŠ¥! ì§€ê¸ˆ ë°”ë¡œ ëª¨ìŠ¤ë¶€í˜¸ ë³€í™˜ê¸°ë¡œ ì²´í—˜í•´ë³´ì„¸ìš”!
    </div>

    <div class="morse-wrapper">
        <textarea id="morseInput" placeholder="í…ìŠ¤íŠ¸ ì…ë ¥ (í•œê¸€ / ì˜ë¬¸ / ìˆ«ì)"></textarea>

        <div>
            <button onclick="convertToMorse()">ğŸ’« ë³€í™˜í•˜ê¸°</button>
            <button onclick="playMorse()">ğŸ”Š ì¬ìƒ</button>
            <button onclick="stopMorse()">ğŸ›‘ ì •ì§€</button>
        </div>

        <div class="speed-buttons">
            <span>ì¬ìƒ ì†ë„:</span>
            <button onclick="setSpeed(0.5)">0.5ë°°</button>
            <button class="active" onclick="setSpeed(1)">1ë°°</button>
            <button onclick="setSpeed(1.5)">1.5ë°°</button>
            <button onclick="setSpeed(2)">2ë°°</button>
        </div>

        <textarea id="morseOutput" placeholder="ëª¨ìŠ¤ë¶€í˜¸ ê²°ê³¼" readonly></textarea>
        <div id="morseVisual"></div>

        <br>

        <h2>í•œê¸€ ëª¨ìŠ¤ë¶€í˜¸í‘œ</h2>
        <table>
            <tr><th>ììŒ</th><th>ë¶€í˜¸</th><th>ëª¨ìŒ</th><th>ë¶€í˜¸</th></tr>
            <tr><td>ã„±</td><td>â€¢ â€• â€¢ â€¢</td><td>ã…</td><td>â€¢</td></tr>
            <tr><td>ã„´</td><td>â€¢ â€¢ â€• â€¢</td><td>ã…‘</td><td>â€¢ â€¢</td></tr>
            <tr><td>ã„·</td><td>â€• â€¢ â€¢ â€¢</td><td>ã…“</td><td>â€•</td></tr>
            <tr><td>ã„¹</td><td>â€¢ â€¢ â€¢ â€•</td><td>ã…•</td><td>â€¢ â€¢ â€¢</td></tr>
            <tr><td>ã…</td><td>â€• â€•</td><td>ã…—</td><td>â€¢ â€•</td></tr>
            <tr><td>ã…‚</td><td>â€¢ â€• â€•</td><td>ã…›</td><td>â€• â€¢</td></tr>
            <tr><td>ã……</td><td>â€• â€• â€¢</td><td>ã…œ</td><td>â€¢ â€¢ â€¢ â€¢</td></tr>
            <tr><td>ã…‡</td><td>â€• â€¢ â€•</td><td>ã… </td><td>â€¢ â€• â€¢</td></tr>
            <tr><td>ã…ˆ</td><td>â€¢ â€• â€• â€¢</td><td>ã…¡</td><td>â€• â€¢ â€¢</td></tr>
            <tr><td>ã…Š</td><td>â€• â€¢ â€• â€¢</td><td>ã…£</td><td>â€¢ â€¢ â€•</td></tr>
            <tr><td></td><td></td><td>ã…</td><td>â€• â€• â€¢ â€•</td></tr>
            <tr><td></td><td></td><td>ã…”</td><td>â€• â€¢ â€• â€•</td></tr>
        </table>

        <h2>ì•ŒíŒŒë²³ ëª¨ìŠ¤ë¶€í˜¸í‘œ</h2>
        <table>
            <tr><th>ë¬¸ì</th><th>ë¶€í˜¸</th><th>ë¬¸ì</th><th>ë¶€í˜¸</th></tr>
            <tr><td>A</td><td>â€¢ â€•</td><td>N</td><td>â€• â€¢</td></tr>
            <tr><td>B</td><td>â€• â€¢ â€¢ â€¢</td><td>O</td><td>â€• â€• â€•</td></tr>
            <tr><td>C</td><td>â€• â€¢ â€• â€¢</td><td>P</td><td>â€¢ â€• â€• â€¢</td></tr>
            <tr><td>D</td><td>â€• â€¢ â€¢</td><td>Q</td><td>â€• â€• â€¢ â€•</td></tr>
            <tr><td>E</td><td>â€¢</td><td>R</td><td>â€¢ â€• â€¢</td></tr>
            <tr><td>F</td><td>â€¢ â€¢ â€• â€¢</td><td>S</td><td>â€¢ â€¢ â€¢</td></tr>
            <tr><td>G</td><td>â€• â€• â€¢</td><td>T</td><td>â€•</td></tr>
            <tr><td>H</td><td>â€¢ â€¢ â€¢ â€¢</td><td>U</td><td>â€¢ â€¢ â€•</td></tr>
            <tr><td>I</td><td>â€¢ â€¢</td><td>V</td><td>â€¢ â€¢ â€¢ â€•</td></tr>
            <tr><td>J</td><td>â€¢ â€• â€• â€•</td><td>W</td><td>â€¢ â€• â€•</td></tr>
            <tr><td>K</td><td>â€• â€¢ â€•</td><td>X</td><td>â€• â€¢ â€¢ â€•</td></tr>
            <tr><td>L</td><td>â€¢ â€• â€¢ â€¢</td><td>Y</td><td>â€• â€¢ â€• â€•</td></tr>
            <tr><td>M</td><td>â€• â€•</td><td>Z</td><td>â€• â€• â€¢ â€¢</td></tr>
        </table>

        <h2>ìˆ«ì ëª¨ìŠ¤ë¶€í˜¸í‘œ</h2>
        <table>
            <tr><th>ìˆ«ì</th><th>ë¶€í˜¸</th><th>ìˆ«ì</th><th>ë¶€í˜¸</th></tr>
            <tr><td>1</td><td>â€¢ â€• â€• â€• â€•</td><td>6</td><td>â€• â€¢ â€¢ â€¢ â€¢</td></tr>
            <tr><td>2</td><td>â€¢ â€¢ â€• â€• â€•</td><td>7</td><td>â€• â€• â€¢ â€¢ â€¢</td></tr>
            <tr><td>3</td><td>â€¢ â€¢ â€¢ â€• â€•</td><td>8</td><td>â€• â€• â€• â€¢ â€¢</td></tr>
            <tr><td>4</td><td>â€¢ â€¢ â€¢ â€¢ â€•</td><td>9</td><td>â€• â€• â€• â€• â€¢</td></tr>
            <tr><td>5</td><td>â€¢ â€¢ â€¢ â€¢ â€¢</td><td>0</td><td>â€• â€• â€• â€• â€•</td></tr>
        </table>
    </div>

</div>

<script>
    const morseCodeMap = {
        'A':'Â·â€“','B':'â€“Â·Â·Â·','C':'â€“Â·â€“Â·','D':'â€“Â·Â·','E':'Â·','F':'Â·Â·â€“Â·','G':'â€“â€“Â·','H':'Â·Â·Â·Â·','I':'Â·Â·','J':'Â·â€“â€“â€“',
        'K':'â€“Â·â€“','L':'Â·â€“Â·Â·','M':'â€“â€“','N':'â€“Â·','O':'â€“â€“â€“','P':'Â·â€“â€“Â·','Q':'â€“â€“Â·â€“','R':'Â·â€“Â·','S':'Â·Â·Â·','T':'â€“',
        'U':'Â·Â·â€“','V':'Â·Â·Â·â€“','W':'Â·â€“â€“','X':'â€“Â·Â·â€“','Y':'â€“Â·â€“â€“','Z':'â€“â€“Â·Â·',
        '1':'Â·â€“â€“â€“â€“','2':'Â·Â·â€“â€“â€“','3':'Â·Â·Â·â€“â€“','4':'Â·Â·Â·Â·â€“','5':'Â·Â·Â·Â·Â·','6':'â€“Â·Â·Â·Â·','7':'â€“â€“Â·Â·Â·','8':'â€“â€“â€“Â·Â·','9':'â€“â€“â€“â€“Â·','0':'â€“â€“â€“â€“â€“',
        ' ':'/'
    };

    const hangulMorseMap = {
        'ã„±':'Â· â€“ Â· Â·','ã„´':'Â· Â· â€“ Â·','ã„·':'â€“ Â· Â· Â·','ã„¹':'Â· Â· Â· â€“','ã…':'â€“ â€“','ã…‚':'Â· â€“ â€“','ã……':'â€“ â€“ Â·','ã…‡':'â€“ Â· â€“',
        'ã…ˆ':'Â· â€“ â€“ Â·','ã…Š':'â€“ Â· â€“ Â·','ã…‹':'â€“ Â· Â· â€“','ã…Œ':'â€“ â€“ Â· Â·','ã…':'â€“ â€“ â€“','ã…':'Â· â€“ â€“ â€“',
        'ã…':'Â·','ã…‘':'Â· Â·','ã…“':'â€“','ã…•':'Â· Â· Â·','ã…—':'Â· â€“','ã…›':'â€“ Â·','ã…œ':'Â· Â· Â· Â·','ã… ':'Â· â€“ Â·','ã…¡':'â€“ Â· Â·','ã…£':'Â· Â· â€“',
        'ã…':'â€“ â€“ Â· â€“','ã…”':'â€“ Â· â€“ â€“'
    };

    const CHO = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
    const JUNG = ["ã…","ã…","ã…‘","ã…’","ã…“","ã…”","ã…•","ã…–","ã…—","ã…˜","ã…™","ã…š","ã…›","ã…œ","ã…","ã…","ã…Ÿ","ã… ","ã…¡","ã…¢","ã…£"];
    const JONG = ["","ã„±","ã„²","ã„³","ã„´","ã„µ","ã„¶","ã„·","ã„¹","ã„º","ã„»","ã„¼","ã„½","ã„¾","ã„¿","ã…€","ã…","ã…‚","ã…„","ã……","ã…†","ã…‡","ã…ˆ","ã…Š","ã…‹","ã…Œ","ã…","ã…"];

    let speedMultiplier = 1.0;
    let stopFlag = false;
    let audioCtx = null;

    function setSpeed(val) {
        speedMultiplier = val;
        document.querySelectorAll('.speed-buttons button').forEach(btn => btn.classList.remove('active'));
        const target = document.querySelector(`.speed-buttons button[onclick="setSpeed(${val})"]`);
        if (target) target.classList.add('active');
    }

    function decomposeHangul(char) {
        const code = char.charCodeAt(0);
        if (code < 0xAC00 || code > 0xD7A3) return [char];
        const diff = code - 0xAC00;
        const cho = Math.floor(diff / 588);
        const jung = Math.floor((diff % 588) / 28);
        const jong = diff % 28;
        const result = [CHO[cho], JUNG[jung]];
        if (JONG[jong]) result.push(JONG[jong]);
        return result;
    }

    function convertToMorse() {
        const input = document.getElementById("morseInput").value.trim().toUpperCase();
        let output = "";
        for (let ch of input) {
            if (morseCodeMap[ch]) {
                output += morseCodeMap[ch] + " ";
            } else if (/[ê°€-í£]/.test(ch)) {
                const parts = decomposeHangul(ch);
                for (let p of parts) {
                    if (hangulMorseMap[p]) output += hangulMorseMap[p] + " ";
                }
            } else if (hangulMorseMap[ch]) {
                output += hangulMorseMap[ch] + " ";
            }
        }
        output = output.trim();
        document.getElementById("morseOutput").value = output;
        showVisual(output);
    }

    function showVisual(morse) {
        const visual = document.getElementById("morseVisual");
        visual.innerHTML = '';
        morse.split('').forEach(ch => {
            if (ch === 'Â·' || ch === 'â€“') {
                const el = document.createElement('div');
                el.classList.add(ch === 'Â·' ? 'dot' : 'dash');
                visual.appendChild(el);
            }
        });
    }

    async function playMorse() {
        const morse = document.getElementById("morseOutput").value.trim();
        if (!morse) {
            alert("ë¨¼ì € ë³€í™˜ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”!");
            return;
        }
        stopFlag = false;
        const visualDots = document.querySelectorAll('#morseVisual .dot, #morseVisual .dash');
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        let i = 0;

        for (const symbol of morse.split('')) {
            if (stopFlag) break;

            if (symbol === 'Â·' || symbol === 'â€“') {
                const isDash = symbol === 'â€“';
                await playDynamicTone(isDash ? 3 : 1, visualDots[i++]);
            } else {
                // ê³µë°±/êµ¬ë¶„ ê°„ê²©ë„ ì‹¤ì‹œê°„ ì†ë„ ë°˜ì˜
                await waitDynamicUnits(1);
            }
        }
    }

    function stopMorse() {
        stopFlag = true;
        if (audioCtx) {
            try { audioCtx.close(); } catch(e) {}
        }
    }

    function waitDynamicUnits(units) {
        return new Promise(async (resolve) => {
            const start = performance.now();
            while (!stopFlag) {
                const unit = 150 / speedMultiplier; // base 150ms
                const target = units * unit;
                const elapsed = performance.now() - start;
                if (elapsed >= target) break;
                await delay(15);
            }
            resolve();
        });
    }

    async function playDynamicTone(unitMultiplier, visualEl) {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.frequency.value = 600;
        gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();

        if (visualEl) visualEl.classList.add('morse-visual-active');

        const start = performance.now();
        while (!stopFlag) {
            const unit = 150 / speedMultiplier;
            const target = unitMultiplier * unit;
            const elapsed = performance.now() - start;
            if (elapsed >= target) break;
            await delay(15);
        }

        try { osc.stop(); } catch(e) {}

        if (visualEl) {
            visualEl.classList.remove('morse-visual-active');
            await delay(80);
        }
    }

    function delay(ms) {
        return new Promise(res => setTimeout(res, ms));
    }
</script>
</body>
</html>
