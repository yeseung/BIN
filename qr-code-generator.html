<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QR 코드 생성기</title>

    <style>
        :root{
            --bg:#f6f7fb;
            --panel:#ffffff;
            --text:#111827;
            --muted:#6b7280;
            --border:rgba(17,24,39,.12);
            --shadow:0 14px 40px rgba(17,24,39,.10);
            --radius:18px;

            --primary:#2563eb;
            --secondary:#64748b;
        }

        *{box-sizing:border-box}
        body{
            margin:0;
            font-family:system-ui,-apple-system,"Malgun Gothic","Apple SD Gothic Neo",sans-serif;
            background:var(--bg);
            color:var(--text);
        }

        .container{
            max-width:1100px;
            margin:30px auto 50px;
            padding:0 16px;
        }

        h1{
            margin-bottom:20px;
            font-size:24px;
            font-weight:900;
        }

        .grid{
            display:grid;
            gap:20px;
        }
        @media(min-width:900px){
            .grid{grid-template-columns:1fr 1fr}
        }

        .panel{
            background:var(--panel);
            border:1px solid var(--border);
            border-radius:var(--radius);
            box-shadow:var(--shadow);
            overflow:hidden;
        }

        .panel-header{
            padding:14px 18px;
            font-weight:800;
            border-bottom:1px solid var(--border);
            background:#fafafa;
        }

        .panel-body{
            padding:18px;
        }

        /* ===== 폼 ===== */
        .form-group{margin-bottom:16px}
        .form-label{
            display:block;
            font-size:13px;
            color:var(--muted);
            margin-bottom:6px;
        }
        .form-input{
            width:100%;
            padding:10px 12px;
            border-radius:12px;
            border:1px solid var(--border);
            font-size:14px;
        }
        textarea.form-input{resize:vertical}

        /* ===== 타입 선택 ===== */
        .type-selector{
            display:flex;
            gap:12px;
        }
        .type-card{
            flex:1;
            border:1px solid var(--border);
            border-radius:14px;
            padding:14px;
            cursor:pointer;
            display:flex;
            gap:12px;
            align-items:center;
            transition:.15s;
        }
        .type-card.active{
            border-color:var(--primary);
            background:rgba(37,99,235,.05);
        }
        .type-title{font-weight:800}
        .type-desc{font-size:12px;color:var(--muted)}

        /* ===== 색상 ===== */
        .color-selector{
            display:flex;
            gap:14px;
        }
        .color-item{flex:1}
        .color-wrapper{
            display:flex;
            align-items:center;
            gap:10px;
        }
        .color-input{
            width:42px;
            height:42px;
            border:none;
            padding:0;
            background:none;
        }
        .color-preview{
            width:42px;
            height:42px;
            border-radius:10px;
            border:1px solid var(--border);
        }

        /* ===== 버튼 ===== */
        .button-group{
            display:flex;
            gap:12px;
            margin-top:10px;
        }
        .btn-primary,.btn-secondary{
            flex:1;
            border:none;
            border-radius:14px;
            padding:12px;
            font-weight:800;
            cursor:pointer;
        }
        .btn-primary{
            background:var(--primary);
            color:#fff;
        }
        .btn-secondary{
            background:#e5e7eb;
            color:#111;
        }

        /* ===== 결과 ===== */
        .qr-placeholder{
            display:flex;
            justify-content:center;
            align-items:center;
            min-height:260px;
            color:var(--muted);
            border:2px dashed var(--border);
            border-radius:14px;
        }
        .qr-result{
            display:flex;
            justify-content:center;
            align-items:center;
            flex-direction:column;
            gap:14px;
        }
        canvas{
            border-radius:12px;
            border:1px solid var(--border);
        }
        .result-actions{
            display:flex;
            gap:10px;
        }
        .btn-download,.btn-copy{
            border:1px solid var(--border);
            background:#fff;
            padding:10px 14px;
            border-radius:12px;
            cursor:pointer;
            font-weight:700;
        }
        .result-info{
            font-size:12px;
            color:var(--muted);
        }
    </style>
</head>

<body>
<div class="container">
    <h1>QR코드 설정</h1>

    <div class="grid">
        <!-- 설정 -->
        <div class="panel">
            <div class="panel-body">

                <div class="form-group">
                    <label class="form-label">QR코드 타입</label>
                    <div class="type-selector">
                        <div class="type-card active" data-type="url">
                            <div>
                                <div class="type-title">URL</div>
                                <div class="type-desc">웹사이트 링크</div>
                            </div>
                        </div>
                        <div class="type-card" data-type="text">
                            <div>
                                <div class="type-title">텍스트</div>
                                <div class="type-desc">일반 텍스트</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="url-input" class="form-group">
                    <label class="form-label">웹사이트 URL</label>
                    <input id="qr-url" class="form-input" placeholder="https://example.com">
                </div>

                <div id="text-input" class="form-group" style="display:none">
                    <label class="form-label">텍스트 내용</label>
                    <textarea id="qr-text" class="form-input" rows="3"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">QR코드 크기</label>
                    <select id="qr-size" class="form-input">
                        <option value="150">150 × 150</option>
                        <option value="200" selected>200 × 200</option>
                        <option value="300">300 × 300</option>
                        <option value="400">400 × 400</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">QR코드 색상</label>
                    <div class="color-selector">
                        <div class="color-item">
                            <div class="color-wrapper">
                                <input type="color" id="qr-color-dark" class="color-input" value="#000000">
                                <div class="color-preview" id="dark-preview" style="background:#000"></div>
                            </div>
                        </div>
                        <div class="color-item">
                            <div class="color-wrapper">
                                <input type="color" id="qr-color-light" class="color-input" value="#ffffff">
                                <div class="color-preview" id="light-preview" style="background:#fff"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-primary" onclick="generateQR()">QR코드 생성</button>
                    <button class="btn-secondary" onclick="clearAll()">초기화</button>
                </div>

            </div>
        </div>

        <!-- 결과 -->
        <div class="panel">
            <div class="panel-header">생성 결과</div>
            <div class="panel-body">

                <div id="placeholder" class="qr-placeholder">
                    QR코드가 여기에 생성됩니다
                </div>

                <div id="result" class="qr-result" style="display:none">
                    <canvas id="qr-canvas"></canvas>
                    <div class="result-actions">
                        <button class="btn-download" onclick="downloadQR()">PNG 다운로드</button>
                        <button class="btn-copy" onclick="copyToClipboard()">이미지 복사</button>
                    </div>
                    <div class="result-info">
                        이미지를 우클릭하여 저장할 수도 있습니다
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
    document.querySelectorAll('.type-card').forEach(card=>{
        card.onclick=()=>{
            document.querySelectorAll('.type-card').forEach(c=>c.classList.remove('active'));
            card.classList.add('active');
            document.getElementById('url-input').style.display =
                card.dataset.type==='url'?'block':'none';
            document.getElementById('text-input').style.display =
                card.dataset.type==='text'?'block':'none';
        }
    });

    ['dark','light'].forEach(t=>{
        document.getElementById(`qr-color-${t}`).onchange=e=>{
            document.getElementById(`${t}-preview`).style.background=e.target.value;
        }
    });

    function generateQR(){
        const type=document.querySelector('.type-card.active').dataset.type;
        let data= type==='url'
            ? document.getElementById('qr-url').value
            : document.getElementById('qr-text').value;

        if(!data.trim()) return alert('내용을 입력하세요');

        if(type==='url'&&!data.startsWith('http')) data='https://'+data;

        const size=document.getElementById('qr-size').value;
        const dark=document.getElementById('qr-color-dark').value.replace('#','');
        const light=document.getElementById('qr-color-light').value.replace('#','');

        const img=new Image();
        img.crossOrigin='anonymous';
        img.src=`https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodeURIComponent(data)}&color=${dark}&bgcolor=${light}`;

        img.onload=()=>{
            const c=document.getElementById('qr-canvas');
            c.width=c.height=size;
            c.getContext('2d').drawImage(img,0,0,size,size);
            document.getElementById('placeholder').style.display='none';
            document.getElementById('result').style.display='flex';
        };
    }

    function downloadQR(){
        const c=document.getElementById('qr-canvas');
        const a=document.createElement('a');
        a.download='qrcode.png';
        a.href=c.toDataURL();
        a.click();
    }

    function copyToClipboard(){
        const c=document.getElementById('qr-canvas');
        c.toBlob(b=>{
            navigator.clipboard.write([new ClipboardItem({'image/png':b})]);
            alert('복사되었습니다');
        });
    }

    function clearAll(){
        document.getElementById('qr-url').value='';
        document.getElementById('qr-text').value='';
        document.getElementById('placeholder').style.display='flex';
        document.getElementById('result').style.display='none';
    }
</script>
</body>
</html>
