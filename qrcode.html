<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>QRì½”ë“œ ë§Œë“¤ê¸° - ë¬´ë£Œ ìƒì„±ê¸°</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        * { box-sizing: border-box; }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", "Malgun Gothic", system-ui, sans-serif;
            background: #f4f5f7;
            color: #111827;
        }

        .qr-page-wrap {
            max-width: 960px;
            margin: 32px auto 40px;
            padding: 0 16px;
        }

        /* ìƒë‹¨ ì•ˆë‚´ ë°•ìŠ¤ */
        .qr-info-box {
            background-color: #EAF6FD;
            padding: 16px 20px;
            border-left: 4px solid #0091D7;
            margin-top: 5px;
            margin-bottom: 24px;
            word-break: break-all;
            border-radius: 8px;
            font-size: 14px;
            color: #0f172a;
        }

        .qr-subnote {
            text-align: center;
            color: #777;
            margin: 0 0 18px;
            font-size: 14px;
        }

        /* ì¹´ë“œ */
        .qr-card {
            max-width: 720px;
            margin: 28px auto;
            padding: 22px;
            border: 1px solid #e5e7eb;
            border-radius: 14px;
            background: #fff;
            box-shadow: 0 4px 14px rgba(0,0,0,.04);
        }

        .qr-card textarea,
        .qr-card input,
        .qr-card select {
            font-family: inherit;
            font-size: 14px;
        }

        .qr-textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #ccc;
            border-radius: 10px;
            resize: vertical;
        }

        .qr-grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        .qr-grid-2 label span {
            font-weight: 600;
            display: block;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .qr-input,
        .qr-select {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ccc;
            border-radius: 10px;
        }

        .qr-color {
            width: 100%;
            height: 42px;
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 0;
        }

        /* âœ… ë²„íŠ¼ hover íš¨ê³¼ */
        #tnfQrMake:hover:not(:disabled),
        #tnfQrDownloadPng:hover:not(:disabled),
        #tnfQrDownloadJpg:hover:not(:disabled) {
            background-color: #222;
            transform: scale(1.03);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.15s ease-in-out;
        }
        #tnfQrMake:disabled:hover,
        #tnfQrDownloadPng:disabled:hover,
        #tnfQrDownloadJpg:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        /* âœ… ë°˜ì‘í˜• ë²„íŠ¼ */
        .tnf-btn-group {
            display: flex;
            gap: 10px;
            margin-top: 14px;
            flex-wrap: wrap;
        }
        .tnf-btn {
            flex: 1;
            height: 44px;
            border: none;
            border-radius: 9999px;
            background: #111;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        .tnf-btn:disabled {
            background: #f3f4f6;
            color: #9ca3af;
            cursor: not-allowed;
        }

        /* ğŸ“± ëª¨ë°”ì¼ì—ì„œ ì„¸ë¡œ ì •ë ¬ */
        @media (max-width: 640px) {
            .tnf-btn-group {
                flex-direction: column;
            }
            .tnf-btn {
                width: 100%;
                flex: none;
            }
        }

        /* ë¯¸ë¦¬ë³´ê¸° ë°•ìŠ¤ */
        #tnfQrPreviewBox {
            margin-top: 18px;
            padding: 18px;
            border: 1px dashed #ccc;
            border-radius: 12px;
            text-align: center;
            background: #fafafa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 260px;
        }

        /* ECC í‘œ */
        .ecc-wrap {
            margin-top: 26px;
            text-align: center;
        }
        .ecc-wrap h3 {
            margin-bottom: 10px;
            font-size: 16px;
        }
        .ecc-table {
            display: inline-table;
            border-collapse: collapse;
            font-size: 15px;
            text-align: center;
        }
        .ecc-table td {
            padding: 8px 14px;
            border: 1px solid #e5e7eb;
        }
        .ecc-table thead td {
            background: #f3f4f6;
            font-weight: 600;
        }
    </style>

    <!-- QRCode ë¼ì´ë¸ŒëŸ¬ë¦¬ (qrcodejs) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
<div class="qr-page-wrap">

    <div class="qr-info-box">
        ğŸ” QRì½”ë“œ ë§Œë“¤ê¸° ë¬´ë£Œ ì‚¬ì´íŠ¸! URL, ë¬¸ì¥ë§Œ ì…ë ¥í•˜ë©´ ì¦‰ì‹œ QRì½”ë“œ ìƒì„±! ìƒ‰ìƒê³¼ í¬ê¸° ë³€ê²½ ê°€ëŠ¥! ì§€ê¸ˆ ë°”ë¡œ QRì½”ë“œ ë§Œë“¤ê¸°ë¡œ ì œì‘í•´ë³´ì„¸ìš”!
    </div>

    <p class="qr-subnote">â—ï¸ ë„ˆë¬´ í° í¬ê¸°ëŠ” ìƒì„±ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

    <div class="qr-card">
    <textarea id="tnfQrText" rows="3" class="qr-textarea"
              placeholder="ì˜ˆ: ê¸°ìˆ ìˆ  í˜¹ì€ https://techtnf.com"></textarea>

        <div class="qr-grid-2">
            <label>
                <span>í¬ê¸°(px)</span>
                <input id="tnfQrSize" type="number" value="256" class="qr-input">
            </label>
            <label>
                <span>ì˜¤ë¥˜ì •ì •(ECC)</span>
                <select id="tnfQrEC" class="qr-select">
                    <option value="L">L</option>
                    <option value="M" selected>M</option>
                    <option value="Q">Q</option>
                    <option value="H">H</option>
                </select>
            </label>
        </div>

        <div class="qr-grid-2">
            <label>
                <span>QR ìƒ‰ìƒ</span>
                <input id="tnfQrFG" type="color" value="#111111" class="qr-color">
            </label>
            <label>
                <span>ë°°ê²½ìƒ‰ìƒ</span>
                <input id="tnfQrBG" type="color" value="#ffffff" class="qr-color">
            </label>
        </div>

        <!-- âœ… ë°˜ì‘í˜• ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="tnf-btn-group">
            <button id="tnfQrMake" class="tnf-btn">QR ë§Œë“¤ê¸°</button>
            <button id="tnfQrDownloadPng" class="tnf-btn" disabled>PNG ë‹¤ìš´ë¡œë“œ</button>
            <button id="tnfQrDownloadJpg" class="tnf-btn" disabled>JPG ë‹¤ìš´ë¡œë“œ</button>
        </div>

        <div id="tnfQrPreviewBox">
            <div id="tnfQrCanvasBox"></div>
            <p id="tnfQrPlaceholder" style="color:#888;margin:0;">ì•„ì§ QR ì½”ë“œê°€ ìƒì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ECC í‘œ -->
        <div class="ecc-wrap">
            <h3>ì˜¤ë¥˜ì •ì •(ECC) ë ˆë²¨</h3>
            <table class="ecc-table">
                <thead>
                <tr>
                    <td>ë ˆë²¨</td>
                    <td>ë³µì›ìœ¨</td>
                    <td>ì˜ë¯¸</td>
                    <td>í•´ì„</td>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>L</td>
                    <td>ì•½ 7%</td>
                    <td>Low</td>
                    <td>ì†ìƒ ê±°ì˜ ì—†ëŠ” í™˜ê²½, ê°€ì¥ ë‹¨ìˆœ</td>
                </tr>
                <tr>
                    <td>M</td>
                    <td>ì•½ 15%</td>
                    <td>Medium</td>
                    <td>ê¸°ë³¸ê°’. ì¼ìƒì  ì‚¬ìš©ì— ê· í˜•ì </td>
                </tr>
                <tr>
                    <td>Q</td>
                    <td>ì•½ 25%</td>
                    <td>Quartile</td>
                    <td>ë¡œê³  ì‚½ì…/ì¼ë¶€ ê°€ë¦¼ ëŒ€ë¹„</td>
                </tr>
                <tr>
                    <td>H</td>
                    <td>ì•½ 30%</td>
                    <td>High</td>
                    <td>ìµœê³  ë³µì›ë ¥. ì¸ì‡„ë¬¼/ì‹¤ì™¸ ë…¸ì¶œ</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    (function(){
        function ready(fn){
            document.readyState !== 'loading'
                ? fn()
                : document.addEventListener('DOMContentLoaded', fn);
        }

        ready(function(){
            if (typeof QRCode === 'undefined') {
                alert('âš ï¸ qrcode.min.js íŒŒì¼ì´ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            const $ = id => document.getElementById(id);

            const elText = $('tnfQrText');
            const elSize = $('tnfQrSize');
            const elEC   = $('tnfQrEC');
            const elFG   = $('tnfQrFG');
            const elBG   = $('tnfQrBG');

            const btnMake = $('tnfQrMake');
            const btnPng  = $('tnfQrDownloadPng');
            const btnJpg  = $('tnfQrDownloadJpg');

            const box        = $('tnfQrCanvasBox');
            const placeholder = $('tnfQrPlaceholder');

            function makeQR(){
                const text = (elText.value || '').trim();
                if (!text) {
                    alert('í…ìŠ¤íŠ¸ ë˜ëŠ” URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                const size = parseInt(elSize.value || 256, 10);
                if (!size || size <= 0) {
                    alert('í¬ê¸°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                box.innerHTML = '';
                placeholder.style.display = 'none';

                new QRCode(box, {
                    text: text,
                    width: size,
                    height: size,
                    colorDark: elFG.value || '#111111',
                    colorLight: elBG.value || '#FFFFFF',
                    correctLevel: QRCode.CorrectLevel[elEC.value || 'M']  // ì„ íƒí•œ ECC ë°˜ì˜
                });

                [btnPng, btnJpg].forEach(b => {
                    b.disabled = false;
                    b.style.background = '#111';
                    b.style.color = '#fff';
                    b.style.cursor = 'pointer';
                });
            }

            // âœ… í•œê¸€/ììŒÂ·ëª¨ìŒ í¬í•¨ íŒŒì¼ëª… ì²˜ë¦¬
            function makeFilename(base, ext){
                let name = (base || 'qrcode').trim();
                // ì œì–´ ë¬¸ì ì œê±°
                name = name.replace(/[\u0000-\u001F\u007F]/g, '');
                // í•œê¸€(ìëª¨Â·ì™„ì„±í˜•) + ì˜ë¬¸/ìˆ«ì/ì¼ë¶€ ê¸°í˜¸ë§Œ í—ˆìš©
                name = name.replace(/[^0-9A-Za-z\u1100-\u11FF\u3131-\u318E\uAC00-\uD7A3 _\-.()+]/g, '_');
                // ê³µë°± ì •ë¦¬ + ê¸¸ì´ ì œí•œ
                name = name.replace(/\s+/g, ' ').slice(0, 120);
                if (!name) name = 'qrcode';
                return name + '.' + ext;
            }

            function download(format){
                const canvas = box.querySelector('canvas');
                if (!canvas) {
                    alert('ë¨¼ì € QR ì½”ë“œë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                    return;
                }

                const filename = makeFilename(elText.value, format);

                if (canvas.toBlob) {
                    canvas.toBlob(function(blob){
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        document.body.appendChild(a);
                        a.click();
                        a.remove();
                        URL.revokeObjectURL(url);
                    }, (format === 'jpg') ? 'image/jpeg' : 'image/png', 0.92);
                } else {
                    const a = document.createElement('a');
                    a.href = canvas.toDataURL(
                        (format === 'jpg') ? 'image/jpeg' : 'image/png',
                        0.92
                    );
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    a.remove();
                }
            }

            btnMake.addEventListener('click', makeQR);
            btnPng.addEventListener('click',  () => download('png'));
            btnJpg.addEventListener('click',  () => download('jpg'));
        });
    })();
</script>
</body>
</html>
