<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Zodiac Calculator | ë (ì‹­ì´ì§€) ê³„ì‚°ê¸°</title>
    <meta name="description" content="ì¶œìƒ ì—°ë„ë¥¼ ì…ë ¥í•˜ë©´ ì‹­ì´ì§€ ë ì™€ ê°„ì§€(ê°‘ìë…„ ê¸°ì¤€), ì£¼ë³€ ì—°ë„ ë /ê°„ì§€, ê°™ì€ ë  ì—°ë„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." />
    <style>
        :root{
            --bg1:#f5f7fb;
            --bg2:#eef3ff;
            --card: rgba(255,255,255,.72);
            --card2: rgba(255,255,255,.55);
            --stroke: rgba(44, 90, 160, .22);
            --stroke2: rgba(44, 90, 160, .14);
            --text:#111827;
            --muted:#4b5563;
            --blue:#2563eb;
            --blue2:#1e40af;
            --green:#16a34a;
            --red:#dc2626;
            --shadow: 0 18px 45px rgba(17,24,39,.12);
            --radius: 14px;
            --radius2: 10px;
            --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        *{box-sizing:border-box}
        body{
            margin:0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Malgun Gothic", Arial, sans-serif;
            color:var(--text);
            background: radial-gradient(1200px 800px at 20% 10%, #dbeafe 0%, transparent 55%),
            radial-gradient(900px 700px at 80% 20%, #e9d5ff 0%, transparent 55%),
            linear-gradient(180deg, var(--bg1), var(--bg2));
            min-height:100vh;
        }

        .wrap{
            max-width: 980px;
            margin: 24px auto 60px;
            padding: 0 14px;
        }

        .page-title{
            display:flex;
            align-items:center;
            gap:10px;
            margin: 0 0 10px 0;
        }
        .page-title h1{
            font-size: 22px;
            margin:0;
            letter-spacing:-.3px;
        }
        .page-title .badge{
            font-size:12px;
            padding:4px 10px;
            border-radius:999px;
            border:1px solid var(--stroke);
            background: rgba(255,255,255,.6);
            color: var(--blue2);
        }

        .lead{
            margin: 6px 0 18px 0;
            color: var(--muted);
            font-size: 14px;
            line-height: 1.55;
        }

        .glass-card{
            background: var(--card);
            border: 1px solid var(--stroke);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 16px 16px;
            margin: 14px 0;
        }

        .info-box{
            background: var(--card2);
            border: 1px dashed var(--stroke);
            border-radius: var(--radius);
            padding: 14px 16px;
            margin: 12px 0 14px;
        }

        .info-box h5{
            margin: 0 0 8px 0;
            color: var(--blue2);
            font-size: 15px;
            letter-spacing:-.2px;
        }
        .info-box ul{
            margin: 6px 0 0;
            padding-left: 18px;
            color: var(--muted);
            font-size: 13px;
            line-height: 1.55;
        }
        .info-box p{
            margin: 8px 0 0;
            color: var(--muted);
            font-size: 13px;
            line-height: 1.6;
        }

        .form-row{
            display:flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: flex-end;
        }

        label{
            font-weight: 700;
            font-size: 13px;
            display:block;
            margin-bottom:6px;
            color:#111827;
        }

        .form-input{
            width: 260px;
            max-width: 100%;
            padding: 10px 12px;
            font-size: 14px;
            border-radius: 12px;
            border: 2px solid rgba(59,130,246,.25);
            background: rgba(255,255,255,.7);
            outline: none;
            transition: .15s ease;
        }
        .form-input:focus{
            border-color: rgba(37,99,235,.65);
            box-shadow: 0 0 0 4px rgba(37,99,235,.12);
        }
        .form-input.error{
            border-color: rgba(220,38,38,.65);
            box-shadow: 0 0 0 4px rgba(220,38,38,.10);
        }
        .form-input.success{
            border-color: rgba(22,163,74,.65);
            box-shadow: 0 0 0 4px rgba(22,163,74,.10);
        }

        .help{
            font-size: 12px;
            color: var(--muted);
            margin-top: 6px;
        }

        .btn-row{
            display:flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .glass-button{
            border: 1px solid var(--stroke);
            background: rgba(255,255,255,.7);
            color: #0f172a;
            border-radius: 12px;
            padding: 10px 14px;
            font-weight: 800;
            cursor: pointer;
            transition: .15s ease;
            box-shadow: 0 12px 24px rgba(17,24,39,.10);
            user-select: none;
        }
        .glass-button:hover{ transform: translateY(-1px); }
        .glass-button:active{ transform: translateY(0px); }

        .glass-button.primary{
            background: linear-gradient(135deg, rgba(37,99,235,.95), rgba(30,64,175,.95));
            border-color: rgba(37,99,235,.55);
            color: white;
        }
        .glass-button.gray{
            background: linear-gradient(135deg, rgba(149,165,166,.95), rgba(127,140,141,.95));
            border-color: rgba(107,114,128,.55);
            color: white;
        }

        .error-message{
            display:none;
            padding: 12px 14px;
            border-radius: 12px;
            border: 1px solid rgba(220,38,38,.35);
            background: rgba(220,38,38,.07);
            color: #991b1b;
            font-size: 13px;
            font-weight: 700;
            margin: 10px 0;
        }

        .result-title{
            margin: 0 0 14px 0;
            color: var(--blue2);
            font-size: 18px;
            font-weight: 900;
            letter-spacing:-.2px;
        }

        .hero{
            text-align: center;
            margin: 18px 0 8px;
            padding: 22px;
            border-radius: 14px;
            border: 3px solid rgba(37,99,235,.22);
            background: linear-gradient(135deg, rgba(59,130,246,.10), rgba(29,78,216,.10));
        }
        .hero .emoji{ font-size: 52px; margin-bottom: 8px; }
        .hero .main{
            font-size: 34px;
            font-weight: 900;
            color: var(--blue2);
            margin: 0 0 6px 0;
            letter-spacing: -.4px;
        }
        .hero .ganji{
            font-size: 18px;
            font-weight: 900;
            color: var(--blue);
            margin: 0 0 6px 0;
        }
        .hero .sub{
            font-size: 14px;
            color: var(--muted);
        }

        .section{
            margin: 22px 0 0;
        }
        .section h6{
            margin: 0 0 12px 0;
            color: var(--blue2);
            font-size: 15px;
            font-weight: 900;
        }

        .grid{
            display:grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }

        .cell{
            border-radius: 12px;
            border: 2px solid rgba(37,99,235,.16);
            background: rgba(255,255,255,.55);
            padding: 12px 10px;
            text-align:center;
            overflow:hidden;
        }
        .cell.current{
            border-color: rgba(37,99,235,.55);
            background: rgba(37,99,235,.12);
        }
        .cell .c-emoji{ font-size: 26px; margin-bottom: 6px; }
        .cell .c-name{ font-size: 13px; font-weight: 900; margin-bottom: 4px; }
        .cell .c-ganji{ font-size: 11px; color: var(--blue); font-weight: 700; margin-bottom: 2px; }
        .cell .c-year{ font-size: 12px; color: var(--muted); }

        .same-grid{
            display:grid;
            grid-template-columns: repeat(auto-fill, minmax(92px, 1fr));
            gap: 10px;
        }
        .same{
            border-radius: 12px;
            border: 1px solid rgba(37,99,235,.16);
            background: rgba(255,255,255,.55);
            padding: 10px 8px;
            text-align:center;
            font-size: 13px;
            color:#111827;
        }
        .same.current{
            border: 2px solid rgba(37,99,235,.55);
            background: rgba(37,99,235,.16);
            font-weight: 900;
        }

        .note{
            margin-top: 10px;
            font-size: 12px;
            color: var(--muted);
            text-align:center;
        }

        .tiny{
            font-family: var(--mono);
            font-size: 12px;
            color: #374151;
            background: rgba(255,255,255,.6);
            border: 1px solid var(--stroke2);
            padding: 8px 10px;
            border-radius: 12px;
        }
    </style>
</head>

<body>
<div class="wrap">
    <div class="page-title">
        <h1>ë (ì‹­ì´ì§€) ê³„ì‚°ê¸°</h1>
        <span class="badge">ì–‘ë ¥ Â· 1ì›” 1ì¼ ê¸°ì¤€</span>
    </div>
    <p class="lead">
        ì¶œìƒ ì—°ë„ë¥¼ ì…ë ¥í•˜ë©´ <b>ì‹­ì´ì§€ ë </b>ì™€ <b>ê°„ì§€(ê°‘ìë…„ ê¸°ì¤€)</b>, ì£¼ë³€ ì—°ë„(-6~+6) ë° ê°™ì€ ë  ì—°ë„(Â±60ë…„)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </p>

    <div class="info-box">
        <h5>ğŸ“‹ ì‚¬ìš© ë°©ë²•</h5>
        <ul>
            <li>ì¶œìƒ ì—°ë„ë¥¼ ì…ë ¥í•˜ê³  <b>ë  í™•ì¸</b>ì„ ëˆ„ë¥´ì„¸ìš”.</li>
            <li>ì˜¬í•´ ê¸°ì¤€(-2~+2), ì¶œìƒì—°ë„ ê¸°ì¤€(-6~+6), ê°™ì€ ë  ì—°ë„(Â±60ë…„)ë¥¼ í•¨ê»˜ ë³´ì—¬ì¤ë‹ˆë‹¤.</li>
        </ul>
        <div style="margin-top:14px; padding-top:14px; border-top:1px solid rgba(44, 90, 160, 0.18);">
            <h5>ğŸ”¢ ë  ê³„ì‚° ê³µì‹</h5>
            <p>
                <b>ì‹­ì´ì§€(åäºŒæ”¯)ëŠ” 12ë…„ ì£¼ê¸°ë¡œ ìˆœí™˜</b>í•©ë‹ˆë‹¤.<br>
                â€¢ ê¸°ì¤€: <b>2008ë…„ = ì(ì¥)ë </b><br>
                â€¢ ê³„ì‚°: <span class="tiny">(ì¶œìƒì—°ë„ - 2008) % 12</span> ì˜ ë‚˜ë¨¸ì§€ë¡œ ë  ê²°ì •<br>
                â€¢ ì˜ˆì‹œ: 1990ë…„ â†’ (1990-2008)%12 = 10 â†’ ìˆ (ê°œ)ë <br>
                <b style="color:#b91c1c;">â€» ìŒë ¥(ì…ì¶˜) ê¸°ì¤€ì´ ì•„ë‹ˆë¼, 1ì›” 1ì¼ ê¸°ì¤€(ì–‘ë ¥)ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.</b>
            </p>
        </div>
    </div>

    <div class="glass-card">
        <div class="form-row">
            <div>
                <label for="birthYear">ì¶œìƒ ì—°ë„ (1900~2100) <span style="color:#dc2626;">*</span></label>
                <input type="number" id="birthYear" class="form-input" placeholder="ì˜ˆ: 1990" min="1900" max="2100" />
                <div class="help">ì˜ˆ: 1990, 2008, 2026</div>
            </div>

            <div style="flex:1; min-width:240px;">
                <div class="tiny" style="margin-top: 22px;">
                    â€¢ ê°„ì§€ ê¸°ì¤€: <b>1984ë…„ = ê°‘ì(ç”²å­)ë…„</b><br>
                    â€¢ ê°„ì§€ ê³„ì‚°: (ì—°ë„-1984)%10 / %12
                </div>
            </div>
        </div>
    </div>

    <div class="glass-card">
        <div class="btn-row">
            <button class="glass-button primary" type="button" onclick="calculateZodiac()">ğŸ” ë  í™•ì¸</button>
            <button class="glass-button gray" type="button" onclick="clearAllInputs()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
        </div>
    </div>

    <div id="error-message" class="error-message"></div>

    <div id="result-container" class="glass-card" style="display:none;">
        <div class="result-title">ğŸ“Š ë  ë¶„ì„ ê²°ê³¼</div>
        <div id="result"></div>
        <div class="note">í‘œì‹œëŠ” ì°¸ê³ ìš©ì´ë©°, ìŒë ¥(ì…ì¶˜) ê¸°ì¤€ì´ í•„ìš”í•˜ë©´ ë³„ë„ì˜ ë§Œì„¸ë ¥ ê¸°ì¤€ì„ ì‚¬ìš©í•˜ì„¸ìš”.</div>
    </div>
</div>

<script>
    // ì‹­ì´ì§€ ë  ë°ì´í„°
    const ZODIAC_SIGNS = [
        { name: "ì(ì¥)", emoji: "ğŸ­", index: 0, animal: "ì¥", hanja: "å­", stem: "ì" },
        { name: "ì¶•(ì†Œ)", emoji: "ğŸ®", index: 1, animal: "ì†Œ", hanja: "ä¸‘", stem: "ì¶•" },
        { name: "ì¸(í˜¸ë‘ì´)", emoji: "ğŸ¯", index: 2, animal: "í˜¸ë‘ì´", hanja: "å¯…", stem: "ì¸" },
        { name: "ë¬˜(í† ë¼)", emoji: "ğŸ°", index: 3, animal: "í† ë¼", hanja: "å¯", stem: "ë¬˜" },
        { name: "ì§„(ìš©)", emoji: "ğŸ²", index: 4, animal: "ìš©", hanja: "è¾°", stem: "ì§„" },
        { name: "ì‚¬(ë±€)", emoji: "ğŸ", index: 5, animal: "ë±€", hanja: "å·³", stem: "ì‚¬" },
        { name: "ì˜¤(ë§)", emoji: "ğŸ´", index: 6, animal: "ë§", hanja: "åˆ", stem: "ì˜¤" },
        { name: "ë¯¸(ì–‘)", emoji: "ğŸ‘", index: 7, animal: "ì–‘", hanja: "æœª", stem: "ë¯¸" },
        { name: "ì‹ (ì›ìˆ­ì´)", emoji: "ğŸµ", index: 8, animal: "ì›ìˆ­ì´", hanja: "ç”³", stem: "ì‹ " },
        { name: "ìœ (ë‹­)", emoji: "ğŸ”", index: 9, animal: "ë‹­", hanja: "é…‰", stem: "ìœ " },
        { name: "ìˆ (ê°œ)", emoji: "ğŸ¶", index: 10, animal: "ê°œ", hanja: "æˆŒ", stem: "ìˆ " },
        { name: "í•´(ë¼ì§€)", emoji: "ğŸ·", index: 11, animal: "ë¼ì§€", hanja: "äº¥", stem: "í•´" }
    ];

    // ì‹­ê°„(ê°‘ì„ë³‘ì •ë¬´ê¸°ê²½ì‹ ì„ê³„)
    const TEN_STEMS = [
        { name: "ê°‘", hanja: "ç”²", index: 0 },
        { name: "ì„", hanja: "ä¹™", index: 1 },
        { name: "ë³‘", hanja: "ä¸™", index: 2 },
        { name: "ì •", hanja: "ä¸", index: 3 },
        { name: "ë¬´", hanja: "æˆŠ", index: 4 },
        { name: "ê¸°", hanja: "å·±", index: 5 },
        { name: "ê²½", hanja: "åºš", index: 6 },
        { name: "ì‹ ", hanja: "è¾›", index: 7 },
        { name: "ì„", hanja: "å£¬", index: 8 },
        { name: "ê³„", hanja: "ç™¸", index: 9 }
    ];

    // ì‹­ì´ì§€(ê°„ì§€ìš©)
    const TWELVE_BRANCHES = [
        { name: "ì", hanja: "å­", index: 0 },
        { name: "ì¶•", hanja: "ä¸‘", index: 1 },
        { name: "ì¸", hanja: "å¯…", index: 2 },
        { name: "ë¬˜", hanja: "å¯", index: 3 },
        { name: "ì§„", hanja: "è¾°", index: 4 },
        { name: "ì‚¬", hanja: "å·³", index: 5 },
        { name: "ì˜¤", hanja: "åˆ", index: 6 },
        { name: "ë¯¸", hanja: "æœª", index: 7 },
        { name: "ì‹ ", hanja: "ç”³", index: 8 },
        { name: "ìœ ", hanja: "é…‰", index: 9 },
        { name: "ìˆ ", hanja: "æˆŒ", index: 10 },
        { name: "í•´", hanja: "äº¥", index: 11 }
    ];

    // ë  ê³„ì‚°(2008=ì)
    function getZodiacSign(year) {
        const baseYear = 2008;
        let diff = (year - baseYear) % 12;
        if (diff < 0) diff += 12;
        return ZODIAC_SIGNS[diff];
    }

    // ê°„ì§€ ê³„ì‚°(1984=ê°‘ì)
    function getGanji(year) {
        const baseYear = 1984; // ê°‘ì
        const diff = year - baseYear;

        let stemIndex = diff % 10;
        if (stemIndex < 0) stemIndex += 10;

        let branchIndex = diff % 12;
        if (branchIndex < 0) branchIndex += 12;

        const stem = TEN_STEMS[stemIndex];
        const branch = TWELVE_BRANCHES[branchIndex];

        return {
            name: stem.name + branch.name + "ë…„",
            hanja: stem.hanja + branch.hanja + "å¹´",
            full: `${stem.name}${branch.name}ë…„ (${stem.hanja}${branch.hanja}å¹´)`
        };
    }

    function validateInputs() {
        const yearInput = document.getElementById("birthYear");
        const year = parseInt(yearInput.value, 10);
        const errors = [];

        if (!yearInput.value.trim() || Number.isNaN(year) || year < 1900 || year > 2100) {
            yearInput.classList.remove("success");
            yearInput.classList.add("error");
            errors.push("ì¶œìƒ ì—°ë„ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”. (1900~2100)");
        } else {
            yearInput.classList.remove("error");
            yearInput.classList.add("success");
        }
        return errors;
    }

    function showError(message) {
        const errorDiv = document.getElementById("error-message");
        errorDiv.textContent = message;
        errorDiv.style.display = "block";
        document.getElementById("result-container").style.display = "none";
    }

    function hideError() {
        document.getElementById("error-message").style.display = "none";
    }

    function calculateZodiac() {
        hideError();
        const errors = validateInputs();
        if (errors.length) {
            showError(errors.join(" "));
            return;
        }

        const year = parseInt(document.getElementById("birthYear").value, 10);
        const zodiac = getZodiacSign(year);
        generateZodiacResult(year, zodiac);

        document.getElementById("result-container").style.display = "block";
        document.getElementById("result-container").scrollIntoView({ behavior: "smooth", block: "start" });
    }

    function generateZodiacResult(year, zodiac) {
        const resultDiv = document.getElementById("result");
        const ganji = getGanji(year);

        let html = "";

        // ë‚´ ë 
        html += `
        <div class="hero">
          <div class="emoji">${zodiac.emoji}</div>
          <div class="main">${zodiac.animal}ë  (${zodiac.hanja}, ${zodiac.stem})</div>
          <div class="ganji">${ganji.full}</div>
          <div class="sub">${year}ë…„ìƒ</div>
        </div>
      `;

        // ì˜¬í•´(-2~+2)
        const currentYear = new Date().getFullYear();
        html += `<div class="section">
        <h6>ğŸ—“ï¸ ì˜¬í•´ì˜ ë  (-2ë…„ ~ +2ë…„)</h6>
        <div class="grid">
      `;
        for (let i = -2; i <= 2; i++) {
            const y = currentYear + i;
            const z = getZodiacSign(y);
            const g = getGanji(y);
            const isCurrent = i === 0;
            html += `
          <div class="cell ${isCurrent ? "current" : ""}">
            <div class="c-emoji">${z.emoji}</div>
            <div class="c-name">${z.animal}ë  (${z.hanja}, ${z.stem})</div>
            <div class="c-ganji">${g.full}</div>
            <div class="c-year">${y}ë…„</div>
          </div>
        `;
        }
        html += `</div></div>`;

        // ì¶œìƒì—°ë„ ì£¼ë³€(-6~+6)
        html += `<div class="section">
        <h6>ğŸ“… ì£¼ë³€ ì—°ë„ì˜ ë  (-6ë…„ ~ +6ë…„)</h6>
        <div class="grid">
      `;
        for (let i = -6; i <= 6; i++) {
            const y = year + i;
            const z = getZodiacSign(y);
            const g = getGanji(y);
            const isCurrent = i === 0;
            html += `
          <div class="cell ${isCurrent ? "current" : ""}">
            <div class="c-emoji">${z.emoji}</div>
            <div class="c-name">${z.animal}ë  (${z.hanja}, ${z.stem})</div>
            <div class="c-ganji">${g.full}</div>
            <div class="c-year">${y}ë…„</div>
          </div>
        `;
        }
        html += `</div></div>`;

        // ê°™ì€ ë (Â±60ë…„, 12ë…„ ì£¼ê¸°)
        const sameYears = [];
        for (let i = -60; i <= 60; i += 12) sameYears.push(year + i);
        sameYears.sort((a,b)=>a-b);

        html += `<div class="section">
        <h6>ğŸ” ê°™ì€ ë ë¥¼ ê°€ì§„ ì—°ë„ (ì•ë’¤ 60ë…„)</h6>
        <div class="same-grid">
      `;
        sameYears.forEach(y => {
            html += `<div class="same ${y === year ? "current" : ""}">${y}ë…„</div>`;
        });
        html += `</div></div>`;

        resultDiv.innerHTML = html;
    }

    function clearAllInputs() {
        const el = document.getElementById("birthYear");
        el.value = "";
        el.classList.remove("error", "success");
        hideError();
        document.getElementById("result-container").style.display = "none";
    }

    // ì‹¤ì‹œê°„ ê²€ì¦ + Enter ì§€ì›
    document.addEventListener("DOMContentLoaded", () => {
        const el = document.getElementById("birthYear");
        el.addEventListener("input", () => {
            const v = parseInt(el.value, 10);
            if (el.value.trim() && (Number.isNaN(v) || v < 1900 || v > 2100)) {
                el.classList.remove("success");
                el.classList.add("error");
            } else if (el.value.trim()) {
                el.classList.remove("error");
                el.classList.add("success");
            } else {
                el.classList.remove("error", "success");
            }
        });

        el.addEventListener("keydown", (e) => {
            if (e.key === "Enter") calculateZodiac();
        });
    });
</script>
</body>
</html>
